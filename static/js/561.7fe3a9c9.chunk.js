"use strict";(self.webpackChunkspz_planner=self.webpackChunkspz_planner||[]).push([[561],{9561:(e,n,t)=>{t.r(n),t.d(n,{default:()=>Ne});var l,i,r=t(5043),o=t(262),a=t(3410),s=t(7528),c=t(403);const d=c.Ay.div(l||(l=(0,s.A)(["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n"]))),u=c.Ay.div(i||(i=(0,s.A)(["\n    width: 100%;\n"])));var m,h=t(2930),p=t(7921),x=t(5709),v=t(6242),g=t(3163);const j=c.Ay.div(m||(m=(0,s.A)(["\n    display: flex;\n    flex-direction: row;\n    position: relative;\n    width: 100%;\n"])));var y=t(579);const f=e=>{let{associations:n,onSelect:t}=e;return(0,y.jsx)(x.A,{children:n.map((e=>(0,y.jsx)(b,{onSelect:t,association:e},e.Title)))})},b=e=>{let{association:n,onSelect:t}=e;const l=(0,r.useCallback)((()=>{t(n.Association_ID)}),[t,n.Association_ID]);return(0,y.jsx)(v.A,{onClick:l,children:n.Title})},A=e=>{let{association:n,members:t,reload:l}=e;(0,r.useEffect)((()=>{document.getElementById("association_form").reset(),document.getElementById("firstchair").selectedIndex=null===t||void 0===t?void 0:t.findIndex((e=>(null===n||void 0===n?void 0:n.FirstChair)===e.Member_ID)),document.getElementById("clerk").selectedIndex=null===t||void 0===t?void 0:t.findIndex((e=>(null===n||void 0===n?void 0:n.Clerk)===e.Member_ID)),document.getElementById("treasurer").selectedIndex=null===t||void 0===t?void 0:t.findIndex((e=>(null===n||void 0===n?void 0:n.Treasurer)===e.Member_ID))}));return(0,y.jsxs)(h.A,{id:"association_form",children:[(0,y.jsxs)(p.A,{children:[(0,y.jsx)("label",{htmlFor:"title",children:"Vereinsname:"}),(0,y.jsx)("input",{type:"text",name:"title",id:"title",defaultValue:null===n||void 0===n?void 0:n.Title})]}),(0,y.jsxs)(p.A,{children:[(0,y.jsx)("label",{htmlFor:"firstchair",children:"Vorsitz:"}),(0,y.jsx)("select",{id:"firstchair",children:t.map((e=>(0,y.jsxs)("option",{value:e.Member_ID,children:[e.Forename," ",e.Surname]},"fcmember_".concat(e.Member_ID))))})]}),(0,y.jsxs)(p.A,{children:[(0,y.jsx)("label",{htmlFor:"clerk",children:"Schrift-/Gesch\xe4ftsf\xfchrer/-in:"}),(0,y.jsx)("select",{id:"clerk",children:t.map((e=>(0,y.jsxs)("option",{value:e.Member_ID,children:[e.Forename," ",e.Surname]},"clmember_".concat(e.Member_ID))))})]}),(0,y.jsxs)(p.A,{children:[(0,y.jsx)("label",{htmlFor:"treasurer",children:"Kassierer/-in:"}),(0,y.jsx)("select",{id:"treasurer",children:t.map((e=>(0,y.jsxs)("option",{value:e.Member_ID,children:[e.Forename," ",e.Surname]},"trmember_".concat(e.Member_ID))))})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)(o.default,{onClick:async e=>{e.preventDefault(),l()},children:"Abbrechen"}),(0,y.jsx)(o.default,{onClick:async e=>{var t,i,r;e.preventDefault();let o=document.getElementById("title").value,a=null===(t=document.getElementById("firstchair").options[document.getElementById("firstchair").selectedIndex])||void 0===t?void 0:t.value,s=null===(i=document.getElementById("clerk").options[document.getElementById("clerk").selectedIndex])||void 0===i?void 0:i.value,c=null===(r=document.getElementById("treasurer").options[document.getElementById("treasurer").selectedIndex])||void 0===r?void 0:r.value;void 0!==n?await(0,g.xN)(n.Association_ID,o,a,s,c):await(0,g.GO)(o,a,s,c),l()},children:"Speichern"})]})]})},k=()=>{const[e,n]=(0,r.useState)(new Array(0)),[t,l]=(0,r.useState)(new Array(0)),[i,o]=(0,r.useState)(-1),a=(0,r.useCallback)((async()=>{let e=await(0,g.Tk)();n(void 0!==e?e:new Array(0))}),[]),s=(0,r.useCallback)((async()=>{let e=await(0,g.iT)();l(void 0!==e?e:new Array(0))}),[]),c=(0,r.useCallback)((()=>{o(-1),a(),s()}),[a,s]),d=(0,r.useCallback)((e=>{o(e)}),[]);return(0,r.useEffect)((()=>{a(),s()}),[a,s]),(0,y.jsxs)(j,{children:[(0,y.jsx)(f,{onSelect:d,associations:e}),(0,y.jsx)(A,{association:e.find((e=>e.Association_ID===i)),members:t,reload:c})]})};var I=t(3441),_=t(423),w=t(5394);const S=e=>{let{callback:n}=e;return(0,y.jsxs)(I.Vx.Provider,{value:{color:"#00bd00",className:"IconWrapper"},children:[(0,y.jsx)(w.G3G,{size:"100%",onClick:n}),(0,y.jsx)(C,{callback:n})]})},D=e=>{let{callback:n}=e;return(0,y.jsxs)(I.Vx.Provider,{value:{color:"#fe423e",className:"IconWrapper"},children:[(0,y.jsx)(_.cW1,{size:"100%",onClick:n}),(0,y.jsx)(C,{callback:n})]})},C=e=>{let{callback:n}=e;return(0,y.jsx)("svg",{size:"100%",className:"IconWrapper",children:(0,y.jsx)("circle",{cx:"50%",cy:"50%",r:"35%",fill:"white",onClick:n})})};var E,B,T,F,M=t(6327);const V=c.Ay.div(E||(E=(0,s.A)(["\n    display: flex;\n    flex-direction: column;\n    position: relative;\n    max-width: 100%;\n\n    img {\n        max-height: 1.5rem;\n    }\n\n    td {\n        text-align: center;\n        :nth-child(1) {\n            z-index: 2;\n        }\n    }\n\n    button {\n        width: fit-content;\n        align-self: center;\n    }\n\n    .IconWrapper {\n        max-height: 1.8rem;\n        max-width: 1.8rem;\n        position: absolute;\n        transform: translateX(-50%) translateY(-50%);\n    }\n\n    svg {\n        height: 100%;\n        width: 100%;\n    }\n"]))),z=c.Ay.th(B||(B=(0,s.A)(["\n    display: table-cell;\n    \n    @media (max-width: ",") {\n        display: none;\n    }\n"])),(e=>{let{theme:n}=e;return n.mobile})),U=c.Ay.th(T||(T=(0,s.A)(["\n    display: none;\n    \n    @media (max-width: ",") {\n        display: table-cell;\n    }\n"])),(e=>{let{theme:n}=e;return n.mobile})),L=(c.Ay.div(F||(F=(0,s.A)(["\n    display: none;\n\n    padding: 5px;\n    \n    @media (max-width: ",") {\n        display: flex;\n        flex-direction: column;\n    }\n"])),(e=>{let{theme:n}=e;return n.mobile})),e=>{let{association:n}=e;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(z,{children:n.Title}),(0,y.jsx)(U,{children:n.Association_ID})]})}),N=e=>{let{member_id:n,association_id:t,initial:l,onClick:i}=e;const[o,a]=(0,r.useState)(l),s=(0,r.useCallback)((()=>{let e=!o;a(e),i(n,t,e)}),[o,n,t,i]);return(0,y.jsx)(H,{assigned:o,callback:s})},H=e=>{let{assigned:n,callback:t}=e;return(0,y.jsx)("td",{onClick:t,children:n?(0,y.jsx)(S,{}):(0,y.jsx)(D,{})})},R=()=>{var e,n;const[t,l]=(0,r.useState)(new Array(0)),[i,a]=(0,r.useState)({}),s=(0,r.useCallback)((async()=>{(0,g._e)().then((e=>{void 0!==e&&l(e)}))}),[]),c=(0,r.useCallback)(((e,n,t)=>{let l={...i};void 0===l["".concat(e)]&&(l["".concat(e)]={}),l["".concat(e)]["".concat(n)]=t,a(l)}),[i]),d=(0,r.useCallback)((()=>{(0,g.Ts)(i)}),[i]);return(0,r.useEffect)((()=>{s()}),[s]),(0,y.jsxs)(V,{children:[(0,y.jsx)(o.default,{onClick:d,children:"Speichern"}),(0,y.jsxs)(M.X,{children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{children:"Name:"}),null===(e=t[0])||void 0===e||null===(n=e.Associations)||void 0===n?void 0:n.map((e=>(0,y.jsx)(L,{association:e},"h_".concat(e.Association_ID))))]})}),(0,y.jsx)("tbody",{children:t.map((e=>{var n;return(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{children:e.Fullname}),null===(n=e.Associations)||void 0===n?void 0:n.map((n=>(0,y.jsx)(N,{member_id:e.Member_ID,association_id:n.Association_ID,initial:n.Assigned,onClick:c},"".concat(n.Association_ID,"_").concat(e.Member_ID))))]},e.Member_ID)}))})]})]})};var O;const G=c.Ay.div(O||(O=(0,s.A)(["\n    display: flex;\n    flex-direction: row;\n    position: relative;\n    width: 100%;\n"]))),P=e=>{let{datetemplates:n,onSelect:t}=e;return(0,y.jsx)(x.A,{children:n.map((e=>(0,y.jsx)(W,{onSelect:t,datetemplate:e},e.Title)))})},W=e=>{let{onSelect:n,datetemplate:t}=e;const l=(0,r.useCallback)((()=>{n(t.DateTemplate_ID)}),[n,t.DateTemplate_ID]);return(0,y.jsx)(v.A,{onClick:l,children:t.Title})},X=e=>{let{datetemplate:n,usergroups:t,reload:l}=e;return(0,r.useEffect)((()=>{document.getElementById("datetemplate_form").reset();let e=document.getElementById("category");for(let t=0;t<e.options.length;t++)e.options[t].value===(null===n||void 0===n?void 0:n.Category)&&(e.selectedIndex=t);document.getElementById("usergroup").selectedIndex=null===t||void 0===t?void 0:t.findIndex((e=>(null===e||void 0===e?void 0:e.Usergroup_ID)===(null===n||void 0===n?void 0:n.Usergroup_ID)))}),[n,t]),(0,y.jsxs)(h.A,{id:"datetemplate_form",children:[(0,y.jsxs)(p.A,{children:[(0,y.jsx)("label",{htmlFor:"title",children:"Bezeichnung:"}),(0,y.jsx)("input",{type:"text",name:"title",id:"title",defaultValue:null===n||void 0===n?void 0:n.Title})]}),(0,y.jsxs)(p.A,{children:[(0,y.jsx)("label",{htmlFor:"description",children:"Beschreibung"}),(0,y.jsx)("textarea",{name:"description",id:"description",cols:"30",rows:"3",defaultValue:void 0===n?"":n.Description})]}),(0,y.jsxs)(p.A,{children:[(0,y.jsx)("label",{htmlFor:"category",children:"Art:"}),(0,y.jsxs)("select",{name:"category",id:"category",children:[(0,y.jsx)("option",{value:"event",children:"Auftritt"}),(0,y.jsx)("option",{value:"practice",children:"\xdcben/Probe"}),(0,y.jsx)("option",{value:"other",children:"Sonstiges"})]})]}),(0,y.jsxs)(p.A,{children:[(0,y.jsx)("label",{htmlFor:"type",children:"Bezeichnung:"}),(0,y.jsx)("input",{type:"text",name:"type",id:"type",defaultValue:null===n||void 0===n?void 0:n.Type})]}),(0,y.jsxs)(p.A,{children:[(0,y.jsx)("label",{htmlFor:"location",children:"Ort:"}),(0,y.jsx)("input",{type:"text",name:"location",id:"location",defaultValue:null===n||void 0===n?void 0:n.Location})]}),(0,y.jsxs)(p.A,{children:[(0,y.jsx)("label",{htmlFor:"begin",children:"Startzeit:"}),(0,y.jsx)("input",{type:"time",name:"begin",id:"begin",step:"1",defaultValue:null===n||void 0===n?void 0:n.Begin})]}),(0,y.jsxs)(p.A,{children:[(0,y.jsx)("label",{htmlFor:"departure",children:"Abfahrt:"}),(0,y.jsx)("input",{type:"time",name:"departure",id:"departure",step:"1",defaultValue:null===n||void 0===n?void 0:n.Departure})]}),(0,y.jsxs)(p.A,{children:[(0,y.jsx)("label",{htmlFor:"leave_dep",children:"R\xfcckfahrt:"}),(0,y.jsx)("input",{type:"time",name:"leave_dep",id:"leave_dep",step:"1",defaultValue:null===n||void 0===n?void 0:n.Leave_dep})]}),(0,y.jsxs)(p.A,{children:[(0,y.jsx)("label",{htmlFor:"usergroup",children:"Sichtbarkeit:"}),(0,y.jsx)("select",{name:"usergroup",id:"usergroup",children:t.map((e=>(0,y.jsx)("option",{value:e.Usergroup_ID,children:e.Title},e.Title)))})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)(o.default,{onClick:async e=>{e.preventDefault(),l()},children:"Abbrechen"}),(0,y.jsx)(o.default,{onClick:async e=>{e.preventDefault();let t=document.getElementById("title").value,i=document.getElementById("description").value,r=document.getElementById("category").options[document.getElementById("category").selectedIndex].value,o=document.getElementById("type").value,a=document.getElementById("location").value,s=document.getElementById("begin").value,c=document.getElementById("departure").value,d=document.getElementById("leave_dep").value,u=document.getElementById("usergroup").options[document.getElementById("usergroup").selectedIndex].value;void 0!==n?await(0,g.aT)(n.DateTemplate_ID,t,i,r,o,a,s,c,d,u):await(0,g.BD)(t,i,r,o,a,s,c,d,u),l()},children:"Speichern"})]})]})},J=()=>{const[e,n]=(0,r.useState)(new Array(0)),[t,l]=(0,r.useState)(new Array(0)),[i,o]=(0,r.useState)(-1),a=(0,r.useCallback)((async()=>{let e=await(0,g.kC)();n(void 0!==e?e:new Array(0))}),[]),s=(0,r.useCallback)((async()=>{let e=await(0,g.is)();l(void 0!==e?e:new Array(0))}),[]),c=(0,r.useCallback)((()=>{o(-1),a()}),[a]),d=(0,r.useCallback)((e=>{o(e)}),[]);return(0,r.useEffect)((()=>{a(),s()}),[a,s]),(0,y.jsxs)(G,{children:[(0,y.jsx)(P,{onSelect:d,datetemplates:e}),(0,y.jsx)(X,{datetemplate:e.find((e=>e.DateTemplate_ID===i)),usergroups:t,reload:c})]})};var Y;const q=c.Ay.div(Y||(Y=(0,s.A)(["\n    padding-left: env(safe-area-inset-left);\n    display: flex;\n    flex-direction: row;\n    position: relative;\n    width: 100%;\n\n    iframe {\n        width: 100%;\n        aspect-ratio: 210/297;\n    }\n"]))),K=e=>{let{scores:n,onSelect:t}=e;return(0,y.jsx)(x.A,{children:n.sort(((e,n)=>e.Title.localeCompare(n.Title))).map((e=>(0,y.jsx)(Z,{onSelect:t,score:e},e.Score_ID)))})},Z=e=>{let{onSelect:n,score:t}=e;const l=(0,r.useCallback)((()=>{n(t.Score_ID)}),[n,t]);return(0,y.jsx)(v.A,{onClick:l,children:t.Title})},Q=e=>{let{score:n,reload:t}=e;(0,r.useEffect)((()=>{document.getElementById("score_form").reset()}),[n]);return(0,y.jsxs)(h.A,{id:"score_form",children:[(0,y.jsxs)(p.A,{children:[(0,y.jsx)("label",{htmlFor:"title",children:"Name:"}),(0,y.jsx)("input",{type:"text",name:"title",id:"title",defaultValue:null===n||void 0===n?void 0:n.Title})]}),(0,y.jsxs)(p.A,{children:[(0,y.jsx)("label",{htmlFor:"link",children:"Link:"}),(0,y.jsx)("input",{type:"url",name:"link",id:"link",defaultValue:null===n||void 0===n?void 0:n.Link})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)(o.default,{onClick:e=>{e.preventDefault(),t()},children:"Abbrechen"}),(0,y.jsx)(o.default,{onClick:async e=>{e.preventDefault();let l=document.getElementById("title").value,i=document.getElementById("link").value;void 0!==n?await(0,g.g2)(n.Score_ID,l,i):(0,g.N2)(l,i),document.getElementById("score_form").reset(),t()},children:"Speichern"}),(0,y.jsx)(o.default,{onClick:async e=>{e.preventDefault(),void 0!==n&&await(0,g.kr)(n.Score_ID),t()},children:"L\xf6schen"})]}),null!==n&&void 0!==n&&n.Link?(0,y.jsx)("iframe",{title:"score_view",src:null===n||void 0===n?void 0:n.Link}):(0,y.jsx)(y.Fragment,{})]})},$=()=>{const[e,n]=(0,r.useState)(new Array(0)),[t,l]=(0,r.useState)(-1),i=(0,r.useCallback)((async()=>{let e=await(0,g.OG)();n(void 0!==e?e:new Array(0))}),[]),o=(0,r.useCallback)((()=>{l(-1),i()}),[i]),a=(0,r.useCallback)((e=>{l(e)}),[]);return(0,r.useEffect)((()=>{i()}),[i]),(0,y.jsxs)(q,{children:[(0,y.jsx)(K,{scores:e,onSelect:a}),(0,y.jsx)(Q,{score:e.find((e=>e.Score_ID===t)),reload:o})]})};var ee,ne,te,le;const ie=c.Ay.div(ee||(ee=(0,s.A)(["\n    display: flex;\n    flex-direction: column;\n    position: relative;\n    max-width: 100%;\n\n    img {\n        max-height: 1.5rem;\n    }\n\n    td {\n        text-align: center;\n        :nth-child(1) {\n            z-index: 2;\n        }\n    }\n\n    button {\n        width: fit-content;\n        align-self: center;\n    }\n\n    .IconWrapper {\n        max-height: 1.8rem;\n        max-width: 1.8rem;\n        position: absolute;\n        transform: translateX(-50%) translateY(-50%);\n    }\n\n    svg {\n        height: 100%;\n        width: 100%;\n    }\n"]))),re=c.Ay.th(ne||(ne=(0,s.A)(["\n    display: table-cell;\n    \n    @media (max-width: ",") {\n        display: none;\n    }\n"])),(e=>{let{theme:n}=e;return n.mobile})),oe=c.Ay.th(te||(te=(0,s.A)(["\n    display: none;\n    \n    @media (max-width: ",") {\n        display: table-cell;\n    }\n"])),(e=>{let{theme:n}=e;return n.mobile})),ae=c.Ay.div(le||(le=(0,s.A)(["\n    display: none;\n\n    padding: 5px;\n    \n    @media (max-width: ",") {\n        display: flex;\n        flex-direction: column;\n    }\n"])),(e=>{let{theme:n}=e;return n.mobile})),se=e=>{let{usergroup:n}=e;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(re,{children:n.Title}),(0,y.jsx)(oe,{children:n.Usergroup_ID})]})},ce=e=>{let{member_id:n,usergroup_id:t,initial:l,onClick:i}=e;const[o,a]=(0,r.useState)(l),s=(0,r.useCallback)((()=>{let e=!o;a(e),i(n,t,e)}),[o,n,t,i]);return(0,y.jsx)(de,{assigned:o,callback:s})},de=e=>{let{assigned:n,callback:t}=e;return(0,y.jsx)("td",{onClick:t,children:n?(0,y.jsx)(S,{}):(0,y.jsx)(D,{})})},ue=e=>{let{usergroups:n}=e;return(0,y.jsx)(ae,{children:null===n||void 0===n?void 0:n.map((e=>(0,y.jsxs)("div",{children:[e.Usergroup_ID,": ",e.Title]},"".concat(e.Usergroup_ID,"_legend"))))})},me=()=>{var e,n;const[t,l]=(0,r.useState)(new Array(0)),[i,a]=(0,r.useState)({}),s=(0,r.useCallback)((async()=>{let e=await(0,g.Zt)();l(void 0!==e?e:new Array(0))}),[]),c=(0,r.useCallback)(((e,n,t)=>{let l={...i};void 0===l["".concat(e)]&&(l["".concat(e)]={}),l["".concat(e)]["".concat(n)]=t,a(l)}),[i]),d=(0,r.useCallback)((()=>{(0,g.uU)(i)}),[i]);return(0,r.useEffect)((()=>{s()}),[s]),(0,y.jsxs)(ie,{children:[(0,y.jsx)(o.default,{onClick:d,children:"Speichern"}),(0,y.jsxs)(M.X,{children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{children:"Name:"}),null===(e=t[0])||void 0===e?void 0:e.Usergroups.map((e=>(0,y.jsx)(se,{usergroup:e},"h_".concat(e.Usergroup_ID))))]})}),(0,y.jsx)("tbody",{children:t.map((e=>(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{children:e.Fullname}),e.Usergroups.map((n=>(0,y.jsx)(ce,{member_id:e.Member_ID,usergroup_id:n.Usergroup_ID,initial:n.Assigned,onClick:c},"".concat(n.Usergroup_ID,"_").concat(e.Member_ID))))]},e.Member_ID)))})]}),(0,y.jsx)(ue,{usergroups:null===(n=t[0])||void 0===n?void 0:n.Usergroups})]})};var he;const pe=c.Ay.div(he||(he=(0,s.A)(["\n    display: flex;\n    flex-direction: row;\n    position: relative;\n    width: 100%;\n"]))),xe=e=>{let{usergroups:n,onSelect:t}=e;return(0,y.jsx)(x.A,{children:n.map((e=>(0,y.jsx)(ve,{onSelect:t,usergroup:e},e.Title)))})},ve=e=>{let{onSelect:n,usergroup:t}=e;const l=(0,r.useCallback)((()=>{n(t.Usergroup_ID)}),[n,t.Usergroup_ID]);return(0,y.jsx)(v.A,{onClick:l,children:t.Title})},ge=e=>{let{usergroup:n,associations:t,reload:l}=e;(0,r.useEffect)((()=>{document.getElementById("usergroup_form").reset(),document.getElementById("association").selectedIndex=null===t||void 0===t?void 0:t.findIndex((e=>(null===n||void 0===n?void 0:n.Association_ID)===e.Association_ID)),document.getElementById("admin").checked="1"===(null===n||void 0===n?void 0:n.Admin),document.getElementById("moderator").checked="1"===(null===n||void 0===n?void 0:n.Moderator)}),[n,t]);return(0,y.jsxs)(h.A,{id:"usergroup_form",children:[(0,y.jsxs)(p.A,{children:[(0,y.jsx)("label",{htmlFor:"title",children:"Bezeichnung:"}),(0,y.jsx)("input",{type:"text",name:"title",id:"title",defaultValue:null===n||void 0===n?void 0:n.Title})]}),(0,y.jsxs)(p.A,{children:[(0,y.jsx)("label",{htmlFor:"admin",children:"Admin:"}),(0,y.jsx)("input",{type:"checkbox",name:"admin",id:"admin",defaultChecked:void 0!==n&&n.Admin})]}),(0,y.jsxs)(p.A,{children:[(0,y.jsx)("label",{htmlFor:"moderator",children:"Moderator:"}),(0,y.jsx)("input",{type:"checkbox",name:"moderator",id:"moderator",defaultChecked:void 0!==n&&n.Moderator})]}),(0,y.jsxs)(p.A,{children:[(0,y.jsx)("label",{htmlFor:"info",children:"Info:"}),(0,y.jsx)("textarea",{name:"info",id:"info",cols:"30",rows:"3",defaultValue:void 0===n?"":n.Info})]}),(0,y.jsxs)(p.A,{children:[(0,y.jsx)("label",{htmlFor:"association",children:"Verein:"}),(0,y.jsx)("select",{name:"association",id:"association",children:t.map((e=>(0,y.jsx)("option",{value:e.Association_ID,children:e.Title},e.Association_ID)))})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)(o.default,{onClick:async e=>{e.preventDefault(),l()},children:"Abbrechen"}),(0,y.jsx)(o.default,{onClick:async e=>{var t;e.preventDefault();let i=document.getElementById("title").value,r=document.getElementById("admin").checked,o=document.getElementById("moderator").checked,a=document.getElementById("info").value,s=null===(t=document.getElementById("association").options[document.getElementById("association").selectedIndex])||void 0===t?void 0:t.value;""!==i?(console.log(s),void 0!==s?(void 0!==n?await(0,g.s0)(n.Usergroup_ID,i,r,o,a,s):await(0,g.hc)(i,r,o,a,s),l()):alert("Bitte w\xe4hl einen Verein aus!")):alert("Bitte gib eine Bezeichnung ein!")},children:"Speichern"}),(0,y.jsx)(o.default,{onClick:async e=>{e.preventDefault(),void 0!==n&&await(0,g.cF)(n.Usergroup_ID),l()},children:"L\xf6schen"})]})]})},je=()=>{const[e,n]=(0,r.useState)(new Array(0)),[t,l]=(0,r.useState)(new Array(0)),[i,o]=(0,r.useState)(-1),a=(0,r.useCallback)((async()=>{let e=await(0,g.is)();n(void 0!==e?e:new Array(0))}),[]),s=(0,r.useCallback)((()=>{o(-1),a()}),[a]),c=(0,r.useCallback)((e=>{o(e)}),[]);return(0,r.useEffect)((()=>{(0,g.is)().then((e=>{n(void 0!==e?e:new Array(0))})),(0,g.Tk)().then((e=>{l(void 0!==e?e:new Array(0))}))}),[a]),(0,y.jsxs)(pe,{children:[(0,y.jsx)(xe,{onSelect:c,usergroups:e}),(0,y.jsx)(ge,{usergroup:e.find((e=>e.Usergroup_ID===i)),associations:t,reload:s})]})};var ye,fe;const be=c.Ay.div(ye||(ye=(0,s.A)(["\n    display: flex;\n    flex-direction: row;\n"]))),Ae=c.Ay.form(fe||(fe=(0,s.A)(["\n    display: grid;\n    grid-template-columns: auto auto;\n\n    width: fit-content;\n    margin: 5px;\n\n    input, textarea {\n        width: 100%;\n        padding: 5px;\n        margin: 1px;\n        border-radius: 5px;\n        border: 1px solid ",";\n        color: ",";\n        background-color: ",";\n    }\n"])),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryDark}),(e=>{let{theme:n}=e;return n.primaryLight})),ke=e=>{let{roles:n,onSelect:t}=e;return(0,y.jsxs)(x.A,{children:[(0,y.jsx)(Ie,{onSelect:t,role:{role_id:-1,role_name:"*Neue Rolle"}}),n.map((e=>(0,y.jsx)(Ie,{onSelect:t,role:e},e.role_name)))]})},Ie=e=>{let{role:n,onSelect:t}=e;return(0,y.jsx)(v.A,{onClick:()=>t(n.role_id),children:n.role_name})},_e=e=>{let{role:n,onReload:t}=e;const[l,i]=(0,r.useState)(new Array(0));return(0,r.useEffect)((()=>{fetch("".concat(g.Hc,"/api/v0/permissions?api_token=").concat(localStorage.getItem("api_token"))).then((e=>e.json())).then((e=>{i(e)}))}),[]),(0,r.useEffect)((()=>{void 0===n?(document.getElementById("roletitle").value="",document.getElementById("roledescription").value="",l.forEach((e=>{document.getElementById(e.permission_name).checked=!1}))):(document.getElementById("roletitle").value=n.role_name,document.getElementById("roledescription").value=n.description,l.forEach((e=>{document.getElementById(e.permission_name).checked=n.permissions.includes(e.permission_id)})))}),[n,l]),(0,y.jsxs)(Ae,{children:[(0,y.jsx)("label",{children:"Rolle:"}),(0,y.jsx)("input",{type:"text",id:"roletitle"}),(0,y.jsx)("label",{children:"Beschreibung:"}),(0,y.jsx)("textarea",{id:"roledescription"}),l.map((e=>(0,y.jsxs)(r.Fragment,{children:[(0,y.jsx)("label",{children:e.description}),(0,y.jsx)("input",{type:"checkbox",id:e.permission_name,defaultChecked:null===n||void 0===n?void 0:n.permissions.includes(e.permission_id)})]},e.permission_name))),(0,y.jsx)(o.default,{onClick:e=>{let i="";const r={role_name:document.getElementById("roletitle").value,description:document.getElementById("roledescription").value,permissions:l.filter((e=>document.getElementById(e.permission_name).checked)).map((e=>e.permission_id))};e.preventDefault(),i=void 0===n?"".concat(g.Hc,"/api/v0/roles?api_token=").concat(localStorage.getItem("api_token")):"".concat(g.Hc,"/api/v0/roles/").concat(n.role_id,"?api_token=").concat(localStorage.getItem("api_token")),fetch(i,{method:void 0===n?"POST":"PUT",body:JSON.stringify(r)}).then((()=>{t()}))},children:"Speichern"}),(0,y.jsx)(o.default,{onClick:e=>{e.preventDefault(),void 0!==n&&fetch("".concat(g.Hc,"/api/v0/roles/").concat(n.role_id,"?api_token=").concat(localStorage.getItem("api_token")),{method:"DELETE"}).then((e=>{e.ok?t():409===e.status?alert("Rolle kann nicht gel\xf6scht werden, da ihr noch Benutzer zugeordnet."):alert("Fehler beim L\xf6schen der Rolle")}))},children:"L\xf6schen"})]})},we=()=>{const[e,n]=(0,r.useState)(new Array(0)),[t,l]=(0,r.useState)(-1),i=()=>{fetch("".concat(g.Hc,"/api/v0/roles?api_token=").concat(localStorage.getItem("api_token"))).then((e=>e.ok?e.json():[])).then((e=>{n(e)}))};return(0,r.useEffect)((()=>{i()}),[]),(0,y.jsxs)(be,{children:[(0,y.jsx)(ke,{roles:e,onSelect:e=>{l(e)}}),(0,y.jsx)(_e,{role:e.find((e=>e.role_id===t)),onReload:()=>{i()}})]})};var Se,De;const Ce=c.Ay.div(Se||(Se=(0,s.A)(["\n    display: flex;\n    flex-direction: row;\n"]))),Ee=c.Ay.form(De||(De=(0,s.A)(["\n    display: grid;\n"])));var Be=t(3445),Te=t(5467);const Fe=e=>{let{associations:n,onSelect:t}=e;return(0,y.jsx)(x.A,{children:n.map((e=>(0,Te._m)(5,e.Association_ID)?(0,y.jsx)(Me,{association:e,onSelect:t},e.Title):(0,y.jsx)(y.Fragment,{})))})},Me=e=>{let{association:n,onSelect:t}=e;const l=(0,r.useCallback)((()=>{t(n.Association_ID)}),[t,n.Association_ID]);return(0,y.jsx)(v.A,{onClick:l,children:n.Title})},Ve=e=>{var n;let{members:t,association:l}=e;const[i,a]=(0,r.useState)(-1),[s,c]=(0,r.useState)(new Array(0)),[d,u]=(0,r.useState)(new Array(0)),m=[{value:-1,label:void 0!==l?"Mitglied ausw\xe4hlen":"erst Verein ausw\xe4hlen"},...t.map((e=>({value:e.Member_ID,label:e.Forename+" "+e.Surname})))],h=(0,r.useCallback)((()=>{fetch("".concat(g.Hc,"/api/v0/roles?api_token=").concat(localStorage.getItem("api_token"))).then((e=>e.ok?e.json():[])).then((e=>{c(e)}))}),[]),p=(0,r.useCallback)((e=>{var n;a(parseInt(e.target.value));let i=null===(n=t.find((n=>n.Member_ID===parseInt(e.target.value))))||void 0===n?void 0:n.Roles;if(void 0!==i){let e=i[parseInt(null===l||void 0===l?void 0:l.Association_ID)];u(void 0!==e?e:new Array(0))}else u(new Array(0))}),[t,l]);(0,r.useEffect)((()=>{h()}),[h]);return(0,y.jsxs)(Ee,{children:[(0,y.jsx)(Be.A,{options:m,onChange:p}),(0,y.jsx)("h2",{children:null===l||void 0===l?void 0:l.Title}),(0,y.jsx)("h3",{children:null===(n=t.find((e=>e.Member_ID===i)))||void 0===n?void 0:n.Forename}),(0,y.jsx)(ze,{roles:s,assignedRoles:d,onSelect:e=>{let n=parseInt(e.target.value);e.target.checked?u([...d,n]):u(d.filter((e=>e!==n)))}}),(0,y.jsx)(o.default,{onClick:e=>{e.preventDefault();const n=document.querySelectorAll('input[type="checkbox"]:checked'),t=Array.from(n).map((e=>parseInt(e.value)));fetch("".concat(g.Hc,"/api/v0/roleassign/").concat(i,"?api_token=").concat(localStorage.getItem("api_token")),{method:"PATCH",body:JSON.stringify({association_id:l.Association_ID,role_ids:t})})},children:"Speichern"})]})},ze=e=>{let{roles:n,assignedRoles:t,onSelect:l}=e;return(0,r.useEffect)((()=>{for(let e of n)document.getElementById("role_".concat(e.role_id)).checked=null===t||void 0===t?void 0:t.includes(e.role_id)}),[t,n]),(0,y.jsx)(y.Fragment,{children:n.map((e=>(0,y.jsxs)("label",{children:[(0,y.jsx)("input",{type:"checkbox",id:"role_".concat(e.role_id),value:e.role_id,onChange:l}),e.role_name]},e.role_id)))})},Ue=()=>{const[e,n]=(0,r.useState)(new Array(0)),[t,l]=(0,r.useState)(new Array(0)),[i,o]=(0,r.useState)(-1),a=(0,r.useCallback)((async()=>{let e=await(0,g.Tk)();n(void 0!==e?e:new Array(0))}),[]),s=(0,r.useCallback)((async()=>{-1!==i&&fetch("".concat(g.Hc,"/api/v0/member?association_id=").concat(i,"&&api_token=").concat(localStorage.getItem("api_token"))).then((e=>e.json())).then((e=>{l(e)}))}),[i]);return(0,r.useEffect)((()=>{a(),s()}),[a,s]),(0,y.jsxs)(Ce,{children:[(0,y.jsx)(Fe,{onSelect:e=>{o(e)},associations:e}),(0,y.jsx)(Ve,{members:t,association:e.find((e=>e.Association_ID===i))})]})},Le=e=>{let{view:n}=e;const t=[(0,y.jsx)(k,{}),(0,y.jsx)(R,{}),(0,y.jsx)(je,{}),(0,y.jsx)(me,{}),...(0,Te._m)(4)?[(0,y.jsx)(we,{})]:[],...(0,Te._m)(5)?[(0,y.jsx)(Ue,{})]:[],(0,y.jsx)(J,{}),(0,y.jsx)($,{})];return(0,y.jsx)(u,{children:t[n]||(0,y.jsx)(k,{})})},Ne=()=>{const[e,n]=(0,r.useState)(0),t=["Vereine","Vereinzuordnung","Benutzergruppen","Gruppenzuordnung",...(0,Te.sx)([3,4])?["Rollen"]:[],...(0,Te.sx)([3,5])?["Rollenzuordnung"]:[],"Terminvorlagen","Noten"],l=e=>{const t=parseInt(e.target.id.split("_")[2]);isNaN(t)||n(t)};return(0,y.jsxs)(d,{children:[(0,y.jsx)(a.A,{children:t.map(((e,n)=>(0,y.jsx)(o.default,{id:"Button_Administration_".concat(n),onClick:l,children:e},n)))}),(0,y.jsx)(Le,{view:e})]})}},3445:(e,n,t)=>{t.d(n,{A:()=>r});var l=t(5043),i=t(579);const r=e=>{const n=(0,l.useCallback)((n=>{e.onChange(n)}),[e]);return(0,i.jsx)("select",{onChange:n,children:e.options.map(((e,n)=>(0,i.jsx)("option",{value:e.value,children:e.label},n)))})}},2930:(e,n,t)=>{t.d(n,{A:()=>r});var l,i=t(7528);const r=t(403).Ay.form(l||(l=(0,i.A)(["\n    display: block;\n    width: 100%;\n    padding: 5px;\n"])))},7921:(e,n,t)=>{t.d(n,{A:()=>r});var l,i=t(7528);const r=t(403).Ay.div(l||(l=(0,i.A)(["\n    display: block;\n    padding: 2px;\n    label {\n        float: left;\n        width: 25%;\n        min-width: 100px;\n    }\n"])))},5709:(e,n,t)=>{t.d(n,{A:()=>r});var l,i=t(7528);const r=t(403).Ay.nav(l||(l=(0,i.A)(["\n    margin: 2px;\n    padding: 2px;\n    white-space: nowrap;\n    border: 1px solid ",";\n    border-radius: 10px;\n    overflow-y: scroll;\n    max-height: 75vh;\n    min-width: fit-content;\n    width: auto;\n    max-width: fit-content;\n\n\n    @media (max-width: ",") {\n        white-space: normal;\n    }\n\n    ::-webkit-scrollbar {\n        width: 5px;\n    }\n\n    ::-webkit-scrollbar-track {\n        background: none;\n    }\n\n    ::-webkit-scrollbar-thumb {\n        background: ",";\n        border-radius: 5px;\n    }\n\n    ::-webkit-scrollbar-thumb:hover {\n        background: ",";\n    }\n"])),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.mobile}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryHover}))},6242:(e,n,t)=>{t.d(n,{A:()=>r});var l,i=t(7528);const r=t(403).Ay.div(l||(l=(0,i.A)(["\n    user-select: none;\n    cursor: pointer;\n    padding: 2px;\n    border-radius: 5px;\n\n    &:hover {\n        background: ",";\n    }\n"])),(e=>{let{theme:n}=e;return n.primaryHover}))},3410:(e,n,t)=>{t.d(n,{A:()=>r});var l,i=t(7528);const r=t(403).Ay.nav(l||(l=(0,i.A)(["\n    display: flex;\n    background-color: ",";\n    position: relative;\n    padding: 5px;\n    margin: 5px;\n    border-radius: 20px;\n\n    flex-wrap: wrap;\n    justify-content: center;\n"])),(e=>{let{theme:n}=e;return n.primaryHover}))},6327:(e,n,t)=>{t.d(n,{X:()=>r});var l,i=t(7528);const r=t(403).Ay.table(l||(l=(0,i.A)(["\n    margin: 5px;\n    border: 1px solid ",";\n    border-radius: 10px;\n    border-spacing: 0;\n    width: auto;\n\n    th {\n        border-bottom: 1px solid ",";\n        padding: 5px;\n    }\n\n    td {\n        border-top: 1px solid ",";\n        padding: 5px;\n        white-space: nowrap;\n    }\n\n    td:first-child {\n        white-space: normal;\n    }\n"])),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryLight}))},5467:(e,n,t)=>{t.d(n,{_m:()=>l,sx:()=>i});const l=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const t=JSON.parse(localStorage.getItem("permissions")||"{}");var l;if(null===n){for(let i in t)if(t[i].includes(e))return!0}else if(null!==(l=t[n])&&void 0!==l&&l.includes(e))return!0;return!1},i=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(let t of e)if(l(t,n))return!0;return!1}}}]);
//# sourceMappingURL=561.7fe3a9c9.chunk.js.map