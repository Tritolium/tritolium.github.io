"use strict";(self.webpackChunkspz_planner=self.webpackChunkspz_planner||[]).push([[424,880],{5396:(e,n,t)=>{t.d(n,{A:()=>s});var a=t(579);const r=e=>{switch(e){default:return"";case 0:return"Sonntag";case 1:return"Montag";case 2:return"Dienstag";case 3:return"Mittwoch";case 4:return"Donnerstag";case 5:return"Freitag";case 6:return"Samstag"}},l=e=>{switch(e){default:return"";case 0:return"Januar";case 1:return"Februar";case 2:return"M\xe4rz";case 3:return"April";case 4:return"Mai";case 5:return"Juni";case 6:return"Juli";case 7:return"August";case 8:return"September";case 9:return"Oktober";case 10:return"November";case 11:return"Dezember"}},s=e=>{let{dateprops:n}=e;const t=new Date(n.Date),s=r(t.getDay()),i=t.getDate(),c=t.getMonth(),d=t.getFullYear();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"event_type",children:[n.Type," ",n.Location]}),(0,a.jsxs)("div",{className:"event_date",children:[i,". ",l(c)," ",d]}),(0,a.jsx)("div",{className:"event_day",children:s})]})}},4294:(e,n,t)=>{t.d(n,{Fc:()=>v,hA:()=>m,Jl:()=>p,Ug:()=>k,hf:()=>j,V9:()=>b,j_:()=>y,KB:()=>g,Ay:()=>w});var a,r=t(5043),l=t(423),s=t(5394),i=t(7528);const c=t(403).Ay.div(a||(a=(0,i.A)(["\n\n    position: relative;\n    height: 64px;\n    width: 64px;\n\n    :nth-child(1) {\n        z-index: 3;\n    }\n\n    :nth-child(1) {\n        z-index: 2;\n    }\n\n    .IconWrapper {\n        position: absolute;\n    }\n\n    svg {\n        height: 100%;\n        width: 100%;\n    }\n\n    .LoadingSpinner {\n        animation: spin 1s linear infinite;\n\n        @keyframes spin {\n            0% {transform: rotate(0deg);}\n            100% {transform: rotate(360deg);}\n        }\n    }\n"])));var d=t(3441),o=t(3156),h=t(2661),u=t(579);const x=e=>{switch(e.attendence){default:case-1:return(0,u.jsx)(m,{callback:e.callback,theme:e.theme});case 0:return(0,u.jsx)(j,{callback:e.callback,theme:e.theme});case 1:return(0,u.jsx)(p,{callback:e.callback,theme:e.theme});case 2:return(0,u.jsx)(v,{callback:e.callback,theme:e.theme})}},m=e=>{let{callback:n,size:t,theme:a}=e;return(0,u.jsxs)(d.Vx.Provider,{value:{color:a.blue,className:"IconWrapper"},children:[(0,u.jsx)(l.Edw,{size:"100%",onClick:n}),(0,u.jsx)(f,{callback:n})]})},p=e=>{let{callback:n,theme:t}=e;return(0,u.jsxs)(d.Vx.Provider,{value:{color:t.green,className:"IconWrapper"},children:[(0,u.jsx)(s.G3G,{size:"100%",onClick:n}),(0,u.jsx)(f,{callback:n})]})},j=e=>{let{callback:n,theme:t}=e;return(0,u.jsxs)(d.Vx.Provider,{value:{color:t.red,className:"IconWrapper"},children:[(0,u.jsx)(l.cW1,{size:"100%",onClick:n}),(0,u.jsx)(f,{callback:n})]})},v=e=>{let{callback:n,theme:t}=e;return(0,u.jsxs)(d.Vx.Provider,{value:{color:t.yellow,className:"IconWrapper"},children:[(0,u.jsx)(l.Edw,{size:"100%",onClick:n}),(0,u.jsx)(f,{callback:n})]})},g=e=>{let{callback:n}=e;return(0,u.jsxs)(d.Vx.Provider,{value:{color:"#904c77",className:"IconWrapper"},children:[(0,u.jsx)(l.wMi,{size:"100%",onClick:n}),(0,u.jsx)(f,{callback:n})]})},b=e=>{let{callback:n}=e;return(0,u.jsxs)(d.Vx.Provider,{value:{color:"#7d7abc",className:"IconWrapper"},children:[(0,u.jsx)(l.Edw,{size:"100%",onClick:n}),(0,u.jsx)(f,{callback:n})]})},k=e=>{let{callback:n}=e;return(0,u.jsxs)(d.Vx.Provider,{value:{color:"#00bd00",className:"IconWrapper"},children:[(0,u.jsx)(l.cW1,{size:"100%",onClick:n}),(0,u.jsx)(f,{callback:n})]})},y=e=>{let{callback:n,theme:t,className:a=""}=e;return(0,u.jsxs)(d.Vx.Provider,{value:{color:"white",className:"IconWrapper ".concat(a)},children:[(0,u.jsx)(o.waN,{size:"50%",onClick:n}),(0,u.jsx)(f,{callback:n,fill:t.greenRGB,r:"40.625%"})]})},f=e=>{let{callback:n,fill:t="white",r:a="35%"}=e;return(0,u.jsx)("svg",{size:"100%",className:"IconWrapper",children:(0,u.jsx)("circle",{cx:"50%",cy:"50%",r:a,fill:t,onClick:n})})},w=e=>{const[n,t]=(0,r.useState)(e.attendence),[a,l]=(0,r.useState)(!1),s=(0,r.useCallback)((async()=>{var a;let r=new Date,s=void 0!==e.event?new Date(null===(a=e.event)||void 0===a?void 0:a.Date):void 0;if(s&&e.event.Begin){var i;if(s.setHours(e.event.Begin.split(":")[0]),s.setMinutes(e.event.Begin.split(":")[1]),r.getTime()>s.getTime())return void alert("Du kannst deine Zusage nicht mehr \xe4ndern, da der Termin bereits begonnen hat. Solltest du vergessen haben abzusagen, schick bitte eine WhatsApp.");if("event"===(null===(i=e.event)||void 0===i?void 0:i.Category)&&r.getTime()>s.getTime()-54e5)return void alert("Du kannst deine Zusage nicht mehr \xe4ndern, da der Termin in weniger als 1,5 Stunden beginnt. Schick bitte eine WhatsApp zum An- oder Abmelden.")}let c=(n+1)%e.states;l(!0),await e.onClick(e.event_id,c),l(!1),t(c)}),[e,n]);return(0,r.useEffect)((()=>{t(e.attendence)}),[e.attendence]),(0,u.jsxs)(c,{className:"Terminzusage",children:[e.cancelled?(0,u.jsx)(x,{attendence:0,theme:e.theme}):(0,u.jsx)(x,{callback:s,attendence:n,theme:e.theme}),a?(0,u.jsx)(h.vTn,{className:"LoadingSpinner"}):null]})}},9880:(e,n,t)=>{t.r(n),t.d(n,{Zusage:()=>A,default:()=>C});var a,r,l,s,i=t(5043),c=t(3163),d=t(5396),o=t(7528),h=t(403);const u=h.Ay.div(a||(a=(0,o.A)(["\n    display: flex;\n    flex-direction: column;\n    align-content: center;\n    margin: auto;\n    align-items: center;\n\n    select {\n        width: fit-content;\n    }\n"]))),x=h.Ay.div(r||(r=(0,o.A)(["\n    display: grid;\n    border-bottom: 1px solid ",";\n\n    .Date {\n        grid-row: 1;\n    }\n\n    .NameTag {\n        grid-row: 1;\n        font-weight: bold;\n        padding: 2px;\n        cursor: pointer;\n    }\n\n    .NameTagActive {\n        grid-row: 1;\n        font-weight: bold;\n        padding: 2px;\n        cursor: pointer;\n        background-color: ",";\n        color: ",";\n        border-radius: 5px;\n        border: 1px solid ",";\n        cursor: pointer;\n    }\n\n    .DateTag {\n        text-align: center;\n        border-left: 1px solid ",";\n        border-top: 1px solid ",";\n    }\n\n    .AttendenceTag {\n        position: relative;\n        min-width: 32px;\n        min-height: 32px;\n        padding: 5px;\n\n        border-left: 1px solid ",";\n        border-top: 1px solid ",";\n\n        :nth-child(1) {\n            z-index: 3;\n        }\n    }\n\n    .Last {\n        border-right: 1px solid ",";\n    }\n\n    .IconWrapper {\n        width: 32px;\n        height: 32px;\n        position: absolute;\n\n        left: 50%;\n        top: 50%;\n\n        transform: translateX(-50%) translateY(-50%);\n    }\n\n    .PlusOneIcon {\n        width: 18px;\n    }\n\n    @media (max-width: ",") {\n        display: none;\n    }\n"])),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryDark}),(e=>{let{theme:n}=e;return n.primaryDark}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.mobile})),m=h.Ay.table(l||(l=(0,o.A)(["\n    border-collapse: collapse;\n    position: relative;\n    margin: 0 2px 0 2px;\n\n    tr {\n        max-height: 100px;\n    }\n\n    td {\n        text-align: center;\n        border: 1px solid ",";\n\n        > img {\n            min-width: 15px;\n            width: 100%;\n            max-width: 30px;\n        }\n    }\n\n    @media (max-width: ",") {\n        thead, td {\n            display: none;\n        }\n    }\n"])),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.mobile})),p=h.Ay.div(s||(s=(0,o.A)(["\n    @media (min-width: ",") {\n        div {\n            display: none;\n        }\n    }\n"])),(e=>{let{theme:n}=e;return n.mobile}));var j=t(7658),v=t(6058),g=t(579);const b=e=>{let{event:n,theme:t}=e;j.t1.register(j.PP,j.kc,j.E8,j.hE,j.m_,j.s$);const a={labels:[""],datasets:[{data:[n.Consent],backgroundColor:t.greenRGB},{data:[n.Missing],backgroundColor:t.blueRGB},{data:[n.Maybe],backgroundColor:t.yellowRGB},{data:[n.Refusal],backgroundColor:t.redRGB}]};return(0,g.jsxs)(p,{children:[(0,g.jsx)(d.A,{dateprops:n}),(0,g.jsx)(v.yP,{height:"60px",options:{indexAxis:"y",plugins:{title:{display:!1},legend:{display:!1}},responsive:!1,scales:{x:{stacked:!0,display:!1},y:{stacked:!0}}},data:a})]})};var k=t(4294),y=t(5394);const f=e=>{let{attendences:n,theme:t}=e;return(0,g.jsxs)(x,{children:[(0,g.jsx)("span",{className:"Date",children:"Termin:"}),n[0].Attendences.map((e=>(0,g.jsx)(w,{Fullname:e.Fullname},e.Fullname))),n.map((e=>(0,g.jsxs)(i.Fragment,{children:[(0,g.jsx)("span",{className:"DateTag",children:(0,g.jsx)(d.A,{dateprops:e})},e.Event_ID),e.Attendences.map(((n,a)=>{const r=a===e.Attendences.length-1?"AttendenceTag Last":"AttendenceTag";return(0,g.jsx)("span",{className:r,children:(0,g.jsx)(A,{attendence:n.Attendence,plusone:n.PlusOne,theme:t})},n.Fullname+e.Event_ID)}))]},"row_".concat(e.Event_ID))))]})},w=e=>{let{Fullname:n}=e;const[t,a]=(0,i.useState)(!1),r=n.split(" ")[0].slice(0,2)+n.split(" ")[1][0];return(0,g.jsx)("span",{className:t?"NameTagActive":"NameTag",onClick:()=>{a(!t)},children:t?n:r})},A=e=>{let{attendence:n,plusone:t,theme:a}=e;if(1===n&&1===t)return(0,g.jsx)(k.j_,{theme:a,className:"PlusOneIcon"});switch(n){default:case-1:return(0,g.jsx)(k.hA,{theme:a});case 0:return(0,g.jsx)(k.hf,{theme:a});case 1:return(0,g.jsx)(k.Jl,{theme:a});case 2:return(0,g.jsx)(k.Fc,{theme:a})}},D=e=>{let{evaluation:n,theme:t}=e;return(0,g.jsxs)(m,{children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{children:"Termin"}),(0,g.jsx)("th",{colSpan:2,children:"Zu."}),(0,g.jsx)("th",{children:"Ab."}),(0,g.jsx)("th",{children:"Aus."}),(0,g.jsx)("th",{children:"Vllt."}),(0,g.jsx)("th",{children:"M"}),(0,g.jsx)("th",{children:"S"}),(0,g.jsx)("th",{children:"A"}),(0,g.jsx)("th",{children:"D"}),(0,g.jsx)("th",{children:"T"}),(0,g.jsx)("th",{children:"L"}),(0,g.jsx)("th",{children:"Tr"}),(0,g.jsx)("th",{children:"B"}),(0,g.jsx)("th",{children:"P"})]})}),(0,g.jsx)("tbody",{children:n.map((e=>(0,g.jsx)(_,{event:e,theme:t},"eval_".concat(e.Event_ID))))})]})},_=e=>{let{event:n,theme:t}=e;return(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:(0,g.jsx)(d.A,{dateprops:n})}),(0,g.jsx)("td",{colSpan:n.PlusOne?1:2,children:n.Consent}),n.PlusOne?(0,g.jsxs)("td",{children:["+",n.PlusOne]}):(0,g.jsx)(g.Fragment,{}),(0,g.jsx)("td",{children:n.Refusal}),(0,g.jsx)("td",{children:n.Missing}),(0,g.jsx)("td",{children:n.Maybe}),(0,g.jsx)("td",{children:n.Instruments.Major}),(0,g.jsx)("td",{children:n.Instruments.Sopran}),(0,g.jsx)("td",{children:n.Instruments.Diskant}),(0,g.jsx)("td",{children:n.Instruments.Alt}),(0,g.jsx)("td",{children:n.Instruments.Tenor}),(0,g.jsx)("td",{children:n.Instruments.Lyra}),(0,g.jsx)("td",{children:n.Instruments.Trommel}),(0,g.jsx)("td",{children:n.Instruments.Becken}),(0,g.jsx)("td",{children:n.Instruments.Pauke}),(0,g.jsx)(b,{event:n,theme:t})]})},C=e=>{let{theme:n}=e;const[t,a]=(0,i.useState)(new Array(0)),[r,l]=(0,i.useState)(),[s,d]=(0,i.useState)(new Array(0)),[o,h]=(0,i.useState)(new Array(0)),x=(0,i.useCallback)((async()=>{let e=await(0,c.Kp)(r);d(e)}),[r]),m=(0,i.useCallback)((async()=>{let e=await(0,c.Ms)(r);h(e)}),[r]),p=(0,i.useCallback)((e=>{l(e.target.value)}),[l]),j=(0,i.useCallback)((()=>{x(),m()}),[x,m]);return(0,i.useEffect)((()=>{(async()=>{let e=await(0,c.iJ)();a(e)})(),j()}),[j]),0===s.length?(0,g.jsx)("select",{name:"usergroup",id:"usergroup_select",onChange:p,children:t.map(((e,n)=>(0,g.jsx)("option",{value:e.Usergroup_ID,children:e.Title},n)))}):(0,g.jsxs)(u,{children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("select",{name:"usergroup",id:"usergroup_select",onChange:p,children:t.map(((e,n)=>(0,g.jsx)("option",{value:e.Usergroup_ID,children:e.Title},n)))}),(0,g.jsx)(y.UF6,{onClick:j})]}),(0,g.jsx)(f,{attendences:s,theme:n}),(0,g.jsx)(D,{evaluation:o,theme:n})]})}},9424:(e,n,t)=>{t.r(n),t.d(n,{default:()=>z});var a,r=t(5043),l=t(3163),s=t(5709),i=t(3445),c=t(6242),d=t(262),o=t(2930),h=t(6327),u=t(9880),x=t(7528),m=t(403);const p=m.Ay.div(a||(a=(0,x.A)(["\n\n    display: flex;\n    flex-direction: row;\n    position: relative;\n    width: 100%;\n\n    td {\n        text-align: center;\n        min-width: 32px;\n    }\n\n    :nth-child(1) {\n        z-index: 3;\n    }\n\n    :nth-child(1) {\n        z-index: 2;\n    }\n\n    .IconWrapper {\n        min-width: 1.5em;\n        max-width: 32px;\n        min-height: 1.5em;\n        max-height: 32px;\n        position: absolute;\n\n        transform: translateX(-50%) translateY(-50%);\n    }\n\n    @media (max-width: ",") {\n        flex-direction: column;\n        table {\n            width: 100%;\n        }\n    }\n"])),(e=>{let{theme:n}=e;return n.mobile}));var j=t(4294),v=t(579);const g=e=>{let{events:n,onSelect:t,usergroups:a}=e;const l=[{value:"all",label:"Alle"},...a.map((e=>({value:e.Usergroup_ID,label:e.Title})))],[c,d]=(0,r.useState)(l[0].value),o=(0,r.useCallback)((e=>{d(e.target.value)}),[]);return(0,v.jsxs)(s.A,{children:[(0,v.jsx)("div",{children:(0,v.jsx)(i.A,{options:l,onChange:o})}),n.filter((e=>e.Accepted&&!e.Type.includes("Abgesagt")&&!e.Evaluated)).filter((e=>{let n=new Date,t=new Date(e.Date);return null!==e.Begin&&t.setHours(null===e||void 0===e?void 0:e.Begin.split(":")[0],null===e||void 0===e?void 0:e.Begin.split(":")[1],0,0),t<n})).filter((e=>"all"===c||parseInt(e.Usergroup_ID)===parseInt(c))).map((e=>(0,v.jsx)(b,{event:e,onSelect:t},"event_".concat(e.Event_ID))))]})},b=e=>{let{event:n,onSelect:t}=e;const a=(0,r.useCallback)((()=>{t(n.Event_ID)}),[t,n.Event_ID]);return(0,v.jsxs)(c.A,{onClick:a,children:[n.Type," ",n.Location]})},k=e=>{let{event:n,reload:t,theme:a}=e;const[s,i]=(0,r.useState)(new Array(0)),[c,x]=(0,r.useState)({}),m=(0,r.useCallback)((async()=>{void 0!==n&&fetch("".concat(l.Hc,"/api/v0/attendenceeval/").concat(null===n||void 0===n?void 0:n.Event_ID,"?api_token=").concat(localStorage.getItem("api_token"))).then((e=>e.json())).then((e=>{i(e);let n={};for(let t of e)switch(t.Attendence){default:case-1:n[t.Member_ID]=0;break;case 0:n[t.Member_ID]=2;break;case 1:n[t.Member_ID]=3;break;case 2:n[t.Member_ID]=2}x(n)}))}),[n]),p=(0,r.useCallback)(((e,n)=>{let t={...c};t[e]=n,x(t)}),[c]);(0,r.useEffect)((()=>{m()}),[m]);return(0,v.jsxs)(o.A,{id:"evaluation_form",children:[null===n||void 0===n?void 0:n.Type," ",null===n||void 0===n?void 0:n.Location," ",null===n||void 0===n?void 0:n.Date,(0,v.jsxs)(h.X,{children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Name"}),(0,v.jsx)("th",{children:"Angabe"}),(0,v.jsx)("th",{children:"Tats\xe4chlich"})]})}),(0,v.jsx)("tbody",{children:s.sort(((e,n)=>e.Fullname.split(" ")[1]<n.Fullname.split(" ")[1]?-1:e.Fullname.split(" ")[1]>n.Fullname.split(" ")[1]?1:0)).map((e=>(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:e.Fullname}),(0,v.jsx)("td",{children:(0,v.jsx)(u.Zusage,{attendence:e.Attendence,theme:a})}),(0,v.jsx)("td",{children:(0,v.jsx)(y,{member_id:e.Member_ID,attendence:c[e.Member_ID],callback:p,theme:a})})]},"attendence_".concat(e.Member_ID))))})]}),(0,v.jsx)(h.X,{children:(0,v.jsxs)("tbody",{children:[(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:"Unabgemeldet gefehlt"}),(0,v.jsx)("td",{children:(0,v.jsx)(y,{attendence:0,callback:()=>{},theme:a})})]}),(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:"Angemeldet gefehlt"}),(0,v.jsx)("td",{children:(0,v.jsx)(y,{attendence:1,callback:()=>{},theme:a})})]}),(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:"Abgemeldet"}),(0,v.jsx)("td",{children:(0,v.jsx)(y,{attendence:2,callback:()=>{},theme:a})})]}),(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:"Anwesend"}),(0,v.jsx)("td",{children:(0,v.jsx)(y,{attendence:3,callback:()=>{},theme:a})})]}),(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:"Anwesend trotz Abmeldung"}),(0,v.jsx)("td",{children:(0,v.jsx)(y,{attendence:4,callback:()=>{},theme:a})})]})]})}),(0,v.jsxs)("div",{children:[(0,v.jsx)(d.default,{onClick:async e=>{e.preventDefault(),t()},children:"Abbrechen"}),(0,v.jsx)(d.default,{onClick:async e=>{e.preventDefault(),fetch("".concat(l.Hc,"/api/eval.php?event_id=").concat(null===n||void 0===n?void 0:n.Event_ID,"&api_token=").concat(localStorage.getItem("api_token")),{method:"POST",body:JSON.stringify(c)}).then((e=>{200===e.status&&t()}))},children:"Speichern"})]})]})},y=e=>{let{member_id:n,attendence:t,callback:a,theme:l}=e;const s=(0,r.useCallback)((()=>{a(n,(t+1)%5)}),[a,n,t]);switch(t){default:case 0:return(0,v.jsx)(j.KB,{callback:s});case 1:return(0,v.jsx)(j.V9,{callback:s});case 2:return(0,v.jsx)(j.hf,{callback:s,theme:l});case 3:return(0,v.jsx)(j.Jl,{callback:s,theme:l});case 4:return(0,v.jsx)(j.Ug,{callback:s})}},f=e=>{let{theme:n}=e;const[t,a]=(0,r.useState)(new Array(0)),[s,i]=(0,r.useState)(new Array(0)),[c,d]=(0,r.useState)(-1),o=(0,r.useCallback)((async()=>{let e=await(0,l.kQ)("all");a(void 0!==e?e:new Array(0))}),[]),h=(0,r.useCallback)((async()=>{let e=await(0,l.is)();i(void 0!==e?e:new Array(0))}),[]),u=(0,r.useCallback)((()=>{d(-1),o()}),[o]),x=(0,r.useCallback)((e=>{d(e)}),[]);return(0,r.useEffect)((()=>{o(),h()}),[o,h]),(0,v.jsxs)(p,{children:[(0,v.jsx)(g,{events:t,onSelect:x,usergroups:s}),(0,v.jsx)(k,{event:t.find((e=>e.Event_ID===c)),reload:u,theme:n})]})};var w,A=t(3410),D=t(7196);const _=m.Ay.div(w||(w=(0,x.A)(["\n\n    td, th {\n        text-align: center;\n        min-width: 32px;\n    }\n\n    td:nth-child(1), td:nth-child(2), th:nth-child(1) {\n        border-right: 1px solid ",";\n    }\n\n    td:nth-last-child(4), th:nth-last-child(4) {\n        border-left: 1px solid ",";\n    }\n\n    :nth-child(1) {\n        z-index: 3;\n    }\n\n    :nth-child(1) {\n        z-index: 2;\n    }    \n\n    .IconWrapper {\n        min-width: 1.5em;\n        max-width: 32px;\n        min-height: 1.5em;\n        max-height: 32px;\n        position: absolute;\n\n        transform: translateX(-50%) translateY(-50%);\n    }\n"])),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryLight})),C=e=>{let{evaluations:n,filterFrom:t,filterTo:a,category:r,theme:l}=e;return(0,v.jsxs)(h.X,{children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{colSpan:2,children:"Termin"}),(0,v.jsx)("th",{children:(0,v.jsx)(y,{attendence:0,callback:()=>{},theme:l})}),(0,v.jsx)("th",{children:(0,v.jsx)(y,{attendence:1,callback:()=>{},theme:l})}),(0,v.jsx)("th",{children:(0,v.jsx)(y,{attendence:2,callback:()=>{},theme:l})}),(0,v.jsx)("th",{children:(0,v.jsx)(y,{attendence:3,callback:()=>{},theme:l})}),(0,v.jsx)("th",{children:(0,v.jsx)(y,{attendence:4,callback:()=>{},theme:l})}),(0,v.jsx)("th",{children:(0,v.jsx)(D.iZI,{})}),(0,v.jsx)("th",{children:(0,v.jsx)(y,{attendence:3,callback:()=>{},theme:l})}),(0,v.jsx)("th",{children:(0,v.jsx)(y,{attendence:2,callback:()=>{},theme:l})}),(0,v.jsx)("th",{children:"%"})]})}),(0,v.jsx)("tbody",{children:n.filter((e=>{if(void 0!==t&&void 0!==a&&""!==t&&""!==a){let n=new Date(e.Date),r=new Date(t),l=new Date(a);return n>=r&&n<=l}return!0})).filter((e=>!1===e.Type.includes("Abgesagt"))).filter((e=>e.Category===r||"all"===r)).map((e=>(0,v.jsx)(I,{evaluation:e},"evaluation_".concat(e.Type,"_").concat(e.Date))))})]})},I=e=>{let{evaluation:n}=e,t=n.Evaluations.filter((e=>3===e.Evaluation||4===e.Evaluation)).length,a=n.Evaluations.filter((e=>-1!==e.Evaluation)).length,r=new Date(n.Date),l=r.getDate()+"."+(r.getMonth()+1)+"."+r.getFullYear();return(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:l}),(0,v.jsxs)("td",{children:[n.Type," ",n.Location]}),(0,v.jsx)("td",{children:n.Evaluations.filter((e=>0===e.Evaluation)).length}),(0,v.jsx)("td",{children:n.Evaluations.filter((e=>1===e.Evaluation)).length}),(0,v.jsx)("td",{children:n.Evaluations.filter((e=>2===e.Evaluation)).length}),(0,v.jsx)("td",{children:n.Evaluations.filter((e=>3===e.Evaluation)).length}),(0,v.jsx)("td",{children:n.Evaluations.filter((e=>4===e.Evaluation)).length}),(0,v.jsx)("td",{children:n.Prediction}),(0,v.jsx)("td",{children:n.Evaluations.filter((e=>3===e.Evaluation||4===e.Evaluation)).length}),(0,v.jsx)("td",{children:n.Evaluations.filter((e=>!(3===e.Evaluation||4===e.Evaluation||-1===e.Evaluation))).length}),(0,v.jsxs)("td",{children:[t,"/",a," (",Math.round(t/a*100),"%)"]})]})},S=e=>{let{theme:n}=e;const[t,a]=(0,r.useState)(new Array(0)),[s,i]=(0,r.useState)(-1),[c,d]=(0,r.useState)("all"),[o,h]=(0,r.useState)(new Date("2023-11-23").toISOString().split("T")[0]),[u,x]=(0,r.useState)((new Date).toISOString().split("T")[0]),[m,p]=(0,r.useState)(new Array(0)),j=(0,r.useCallback)((async()=>{let e=await(0,l.iJ)();a(void 0!==e?e:new Array(0))}),[]),g=(0,r.useCallback)((async()=>{-1!==s&&fetch("".concat(l.Hc,"/api/v0/attendenceeval?api_token=").concat(localStorage.getItem("api_token"),"&usergroup_id=").concat(s)).then((e=>200===e.status?e.json():void 0)).then((e=>{p(void 0===e?new Array(0):e)}))}),[s]),b=(0,r.useCallback)((e=>{i(e.target.value)}),[]),k=(0,r.useCallback)((e=>{d(e.target.value)}),[]),y=(0,r.useCallback)((()=>{g()}),[g]);return(0,r.useEffect)((()=>{j(),y()}),[j,y]),(0,v.jsxs)(_,{children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("select",{name:"usergroup",id:"usergroup",onChange:b,children:t.map((e=>(0,v.jsx)("option",{value:e.Usergroup_ID,children:e.Title},e.Usergroup_ID)))}),(0,v.jsxs)("select",{name:"type",id:"type",onChange:k,children:[(0,v.jsx)("option",{value:"all",children:"Alle"}),(0,v.jsx)("option",{value:"practice",children:"\xdcben/Probe"}),(0,v.jsx)("option",{value:"event",children:"Auftritt"}),(0,v.jsx)("option",{value:"other",children:"sonstige Termine"})]}),(0,v.jsx)("input",{type:"date",defaultValue:"2023-11-23",onChange:e=>{h(e.target.value)}}),(0,v.jsx)("input",{type:"date",defaultValue:u,onChange:e=>{x(e.target.value)}})]}),(0,v.jsx)(C,{evaluations:m,filterFrom:o,filterTo:u,category:c,theme:n})]})};var E;const T=m.Ay.div(E||(E=(0,x.A)(["\n    display: flex;\n    flex-direction: column;\n    align-self: flex-start;\n"]))),N=e=>{let{view:n,theme:t}=e;switch(n){default:case 0:return(0,v.jsx)(f,{theme:t});case 1:return(0,v.jsx)(S,{theme:t})}},z=e=>{let{theme:n}=e;const[t,a]=(0,r.useState)(0),l=e=>{switch(e.target.id){default:case"eval_button_0":a(0);break;case"eval_button_1":a(1)}};return(0,v.jsxs)(T,{children:[(0,v.jsxs)(A.A,{children:[(0,v.jsx)(d.default,{id:"eval_button_0",onClick:l,theme:n,children:"Auswertung"}),(0,v.jsx)(d.default,{id:"eval_button_1",onClick:l,theme:n,children:"\xdcbersicht"})]}),(0,v.jsx)(N,{view:t,theme:n})]})}},3445:(e,n,t)=>{t.d(n,{A:()=>l});var a=t(5043),r=t(579);const l=e=>{const n=(0,a.useCallback)((n=>{e.onChange(n)}),[e]);return(0,r.jsx)("select",{onChange:n,children:e.options.map(((e,n)=>(0,r.jsx)("option",{value:e.value,children:e.label},n)))})}},2930:(e,n,t)=>{t.d(n,{A:()=>l});var a,r=t(7528);const l=t(403).Ay.form(a||(a=(0,r.A)(["\n    display: block;\n    width: 100%;\n    padding: 5px;\n"])))},5709:(e,n,t)=>{t.d(n,{A:()=>l});var a,r=t(7528);const l=t(403).Ay.nav(a||(a=(0,r.A)(["\n    margin: 2px;\n    padding: 2px;\n    white-space: nowrap;\n    border: 1px solid ",";\n    border-radius: 10px;\n    overflow-y: scroll;\n    max-height: 75vh;\n    min-width: fit-content;\n    width: auto;\n    max-width: fit-content;\n\n\n    @media (max-width: ",") {\n        white-space: normal;\n    }\n\n    ::-webkit-scrollbar {\n        width: 5px;\n    }\n\n    ::-webkit-scrollbar-track {\n        background: none;\n    }\n\n    ::-webkit-scrollbar-thumb {\n        background: ",";\n        border-radius: 5px;\n    }\n\n    ::-webkit-scrollbar-thumb:hover {\n        background: ",";\n    }\n"])),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.mobile}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryHover}))},6242:(e,n,t)=>{t.d(n,{A:()=>l});var a,r=t(7528);const l=t(403).Ay.div(a||(a=(0,r.A)(["\n    user-select: none;\n    cursor: pointer;\n    padding: 2px;\n    border-radius: 5px;\n\n    &:hover {\n        background: ",";\n    }\n"])),(e=>{let{theme:n}=e;return n.primaryHover}))},3410:(e,n,t)=>{t.d(n,{A:()=>l});var a,r=t(7528);const l=t(403).Ay.nav(a||(a=(0,r.A)(["\n    display: flex;\n    background-color: ",";\n    position: relative;\n    padding: 5px;\n    margin: 5px;\n    border-radius: 20px;\n\n    flex-wrap: wrap;\n    justify-content: center;\n"])),(e=>{let{theme:n}=e;return n.primaryHover}))},6327:(e,n,t)=>{t.d(n,{X:()=>l});var a,r=t(7528);const l=t(403).Ay.table(a||(a=(0,r.A)(["\n    margin: 5px;\n    border: 1px solid ",";\n    border-radius: 10px;\n    border-spacing: 0;\n    width: auto;\n\n    th {\n        border-bottom: 1px solid ",";\n        padding: 5px;\n    }\n\n    td {\n        border-top: 1px solid ",";\n        padding: 5px;\n        white-space: nowrap;\n    }\n\n    td:first-child {\n        white-space: normal;\n    }\n"])),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryLight}))}}]);
//# sourceMappingURL=424.eaea7e41.chunk.js.map