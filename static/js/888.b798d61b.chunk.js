"use strict";(self.webpackChunkspz_planner=self.webpackChunkspz_planner||[]).push([[888],{888:(e,n,t)=>{t.r(n),t.d(n,{default:()=>W});var r,l,c=t(9060),i=t(7952),a=t(2024),s=t(4312),d=t(360);const o=d.cp.div(r||(r=(0,s.c)(["\n    display: flex;\n    justify-content: center;\n"]))),h=d.cp.table(l||(l=(0,s.c)(["\n    td {\n        padding: 5px;\n    }\n"])));var u=t(2496);const m=()=>{const[e,n]=(0,c.useState)(new Array(0));(0,c.useEffect)((()=>{(async()=>{let e=await(0,a.a2)("current");void 0!==e&&n(e)})()}),[]);const t=e=>(e=e.split("-"),"".concat(e[2],".").concat(e[1],".").concat(e[0]));return(0,u.jsxs)(h,{children:[e.length>0?(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"von"}),(0,u.jsx)("th",{children:"bis"}),(0,u.jsx)("th",{children:"Bemerkung"})]})}):(0,u.jsx)("thead",{children:(0,u.jsx)("tr",{children:(0,u.jsx)("th",{children:"Keine Abwesenheiten eingetragen"})})}),(0,u.jsx)("tbody",{children:e.map((e=>(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:t(e.From)}),(0,u.jsx)("td",{children:t(e.Until)}),(0,u.jsx)("td",{children:e.Info})]},e.Absence_ID)))})]})},x=()=>(0,u.jsx)(o,{children:(0,u.jsx)(m,{})});var p,b;const j=d.cp.div(p||(p=(0,s.c)(["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n"]))),f=d.cp.div(b||(b=(0,s.c)(["\n    width: 100%;\n"])));var v,y,w,g=t(3876),k=t(6768);const _=d.cp.div(v||(v=(0,s.c)(["\n    display: flex;\n    flex-direction: row;\n    position: relative;\n    width: 100%;\n"]))),I=d.cp.form(y||(y=(0,s.c)(["\n    display: block;\n    width: 100%;\n    padding: 5px;\n"]))),E=d.cp.div(w||(w=(0,s.c)(["\n    display: block;\n    padding: 2px;\n    label {\n        float: left;\n        width: 25%;\n        min-width: 100px;\n    }\n"]))),F=e=>{let{absences:n,onSelect:t}=e;return(0,u.jsx)(g.c,{children:n.map((e=>(0,u.jsx)(D,{onSelect:t,absence:e},e.Absence_ID)))})},D=e=>{let{absence:n,onSelect:t}=e;const r=(0,c.useCallback)((()=>{t(n.Absence_ID)}),[t,n.Absence_ID]),l=e=>(e=e.split("-"),"".concat(e[2],".").concat(e[1],".").concat(e[0]));return(0,u.jsxs)(k.c,{onClick:r,children:[l(n.From)," - ",l(n.Until)]})},A=e=>{let{selected:n,reload:t}=e;const[r,l]=(0,c.useState)({Absence_ID:-1,From:"",Until:"",Info:""});(0,c.useEffect)((()=>{(async()=>{let e=await(0,a.Q3)(n);void 0!==e&&l(e)})()}),[n]),(0,c.useEffect)((()=>{document.getElementById("absenceeditor").reset()}),[r]);const s=e=>{e.preventDefault(),l({Absence_ID:-1,From:"",Until:"",Info:""})};return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(I,{id:"absenceeditor",children:[(0,u.jsxs)(E,{children:[(0,u.jsx)("label",{htmlFor:"from",children:"Von:"}),(0,u.jsx)("input",{type:"date",name:"from",id:"from",defaultValue:r.From})]}),(0,u.jsxs)(E,{children:[(0,u.jsx)("label",{htmlFor:"until",children:"Bis:"}),(0,u.jsx)("input",{type:"date",name:"until",id:"until",defaultValue:r.Until})]}),(0,u.jsxs)(E,{children:[(0,u.jsx)("label",{htmlFor:"info",children:"Bemerkung:"}),(0,u.jsx)("textarea",{name:"info",id:"info",cols:"30",rows:"3",defaultValue:r.Info})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)(i.default,{onClick:s,children:"Abbrechen"}),(0,u.jsx)(i.default,{onClick:async e=>{if(e.preventDefault(),r.Absence_ID<0)return void(async e=>{let n;e.preventDefault();let r=document.getElementById("from").value,l=document.getElementById("until").value,c=document.getElementById("info").value;n=""===l?r:l,await(0,a.o5)(r,n,c),t(),s(e)})(e);let n,l=document.getElementById("from").value,c=document.getElementById("until").value,i=document.getElementById("info").value;n=""===c?l:c,await(0,a.yI)(r.Absence_ID,r.Member_ID,l,n,i),t(),s(e)},children:"Speichern"}),(0,u.jsx)(i.default,{onClick:async e=>{e.preventDefault(),r.Absence_ID>0&&await(0,a.qG)(r.Absence_ID),t(),s(e)},children:"L\xf6schen"})]})]})})},B=()=>{const[e,n]=(0,c.useState)(new Array(0)),[t,r]=(0,c.useState)(-1),l=(0,c.useCallback)((async()=>{let e=await(0,a.a2)("current");n(void 0!==e?e:new Array(0))}),[]),i=(0,c.useCallback)((()=>{l()}),[l]),s=(0,c.useCallback)((e=>{r(e)}),[]);return(0,c.useEffect)((()=>{l()}),[l]),(0,u.jsxs)(_,{children:[(0,u.jsx)(F,{onSelect:s,absences:e}),(0,u.jsx)(A,{selected:t,reload:i})]})};var C,S=t(5100),L=t(920);const U=d.cp.div(C||(C=(0,s.c)(["\n    display: flex;\n    justify-content: center;\n    text-align: center;\n"]))),V=()=>{const[e,n]=(0,c.useState)(new Array(0)),t=(0,c.useCallback)((async()=>{let e=await(0,a.q8)("current");void 0!==e&&n(e)}),[]),r=e=>(e=e.split("-"),"".concat(e[2],".").concat(e[1],".").concat(e[0]));return(0,c.useEffect)((()=>{t()}),[t]),(0,u.jsxs)(L.WI,{children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"Name"}),(0,u.jsx)("th",{children:"von"}),(0,u.jsx)("th",{children:"bis"}),(0,u.jsx)("th",{children:"Bemerkung"})]})}),(0,u.jsx)("tbody",{children:e.map((e=>(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:e.Fullname}),(0,u.jsx)("td",{children:r(e.From)}),(0,u.jsx)("td",{children:r(e.Until)}),(0,u.jsx)("td",{children:e.Info})]},e.Fullname+e.From)))})]})},z=()=>(0,u.jsx)(U,{children:(0,u.jsx)(V,{})});var G,H=t(2680),K=t(7008);const M=d.cp.div(G||(G=(0,s.c)(["\n    display: flex;\n    flex-direction: row;\n    position: relative;\n    width: 100%;\n"]))),q=()=>{const[e,n]=(0,c.useState)(new Array(0)),t=(0,c.useCallback)((async()=>{let e=await(0,a.Ou)();n(e)}),[]),r=e=>{e.preventDefault(),document.getElementById("absence_form").reset()};return(0,c.useEffect)((()=>{t()}),[t]),(0,u.jsx)(M,{children:(0,u.jsxs)(H.c,{id:"absence_form",children:[(0,u.jsxs)(K.c,{children:[(0,u.jsx)("label",{htmlFor:"member_select",children:"Name:"}),(0,u.jsx)("select",{id:"member_select",children:e.map((e=>(0,u.jsxs)("option",{value:e.Member_ID,children:[e.Forename," ",e.Surname]},"member_".concat(e.Member_ID))))})]}),(0,u.jsxs)(K.c,{children:[(0,u.jsx)("label",{htmlFor:"from",children:"Von:"}),(0,u.jsx)("input",{type:"date",name:"from",id:"from"})]}),(0,u.jsxs)(K.c,{children:[(0,u.jsx)("label",{htmlFor:"until",children:"Bis:"}),(0,u.jsx)("input",{type:"date",name:"until",id:"until"})]}),(0,u.jsxs)(K.c,{children:[(0,u.jsx)("label",{htmlFor:"info",children:"Bemerkung:"}),(0,u.jsx)("textarea",{name:"info",id:"info",cols:"30",rows:"3"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)(i.default,{onClick:r,children:"Abbrechen"}),(0,u.jsx)(i.default,{onClick:async e=>{e.preventDefault();let n=document.getElementById("member_select"),t=n.options[n.selectedIndex].value,l=document.getElementById("from").value,c=document.getElementById("until").value,i=document.getElementById("info").value;await(0,a.Kc)(t,l,c,i),r(e)},children:"Speichern"})]})]})})},N=e=>{let{view:n}=e;switch(n){default:case 0:return(0,u.jsx)(f,{children:(0,u.jsx)(x,{})});case 1:return(0,u.jsx)(f,{children:(0,u.jsx)(B,{})});case 2:return(0,u.jsx)(f,{children:(0,u.jsx)(z,{})});case 3:return(0,u.jsx)(f,{children:(0,u.jsx)(q,{})})}},W=e=>{let{auth_level:n}=e;const[t,r]=(0,c.useState)(0),l=e=>{switch(e.target.id){default:case"absence_button_0":r(0);break;case"absence_button_1":r(1);break;case"absence_button_2":r(2);break;case"absence_button_3":r(3)}};return(0,u.jsxs)(j,{children:[(0,u.jsxs)(S.c,{children:[(0,u.jsx)(i.default,{id:"absence_button_0",onClick:l,children:"\xdcbersicht"}),(0,u.jsx)(i.default,{id:"absence_button_1",onClick:l,children:"Eingabe"}),n>2?(0,u.jsx)(i.default,{id:"absence_button_2",onClick:l,children:"Gesamt\xfcbersicht"}):(0,u.jsx)(u.Fragment,{}),n>2?(0,u.jsx)(i.default,{id:"absence_button_3",onClick:l,children:"manuelle Eingabe"}):(0,u.jsx)(u.Fragment,{})]}),(0,u.jsx)(N,{view:t})]})}},920:(e,n,t)=>{t.d(n,{KG:()=>d,WI:()=>o,_k:()=>h,eS:()=>u});var r,l,c,i,a=t(4312),s=t(360);const d=s.cp.div(r||(r=(0,a.c)(["\n    display: block;\n    text-align: center;\n    select {\n        padding: 5px;\n        margin: 10px;\n        border-radius: 5px;\n    }\n"]))),o=s.cp.table(l||(l=(0,a.c)(["\n    margin: 5px;\n    border: 1px solid ",";\n    border-radius: 10px;\n    /*border-collapse: collapse;*/\n    border-spacing: 0;\n    width: auto;\n\n    display: table;\n\n    th {\n        border-bottom: 1px solid ",";\n        padding: 5px;\n    }\n\n    td {\n        border-top: 1px solid ",";\n        padding: 5px;\n        white-space: nowrap;\n    }\n\n    td:first-child {\n        white-space: normal;\n    }\n\n    img {\n        max-width: 32px;\n    }\n\n    @media (max-width: ",") {\n        font-size: 0.75em;\n    }\n"])),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.mobile})),h=(0,s.cp)(o)(c||(c=(0,a.c)(["\n    display: table;\n    @media (max-width: ",") {\n            display: none;\n    }\n"])),(e=>{let{theme:n}=e;return n.mobile})),u=(0,s.cp)(o)(i||(i=(0,a.c)(["\n    \n    display: none;\n    font-size: 0.75em;\n\n    @media (max-width: ",") {\n            display: table;\n    }\n"])),(e=>{let{theme:n}=e;return n.mobile}))},2680:(e,n,t)=>{t.d(n,{c:()=>c});var r,l=t(4312);const c=t(360).cp.form(r||(r=(0,l.c)(["\n    display: block;\n    width: 100%;\n    padding: 5px;\n"])))},7008:(e,n,t)=>{t.d(n,{c:()=>c});var r,l=t(4312);const c=t(360).cp.div(r||(r=(0,l.c)(["\n    display: block;\n    padding: 2px;\n    label {\n        float: left;\n        width: 25%;\n        min-width: 100px;\n    }\n"])))},3876:(e,n,t)=>{t.d(n,{c:()=>c});var r,l=t(4312);const c=t(360).cp.nav(r||(r=(0,l.c)(["\n    margin: 2px;\n    padding: 2px;\n    white-space: nowrap;\n    border: 1px solid ",";\n    border-radius: 10px;\n    overflow-y: scroll;\n    max-height: 75vh;\n    min-width: fit-content;\n    width: auto;\n    max-width: fit-content;\n\n\n    @media (max-width: ",") {\n        white-space: normal;\n    }\n\n    ::-webkit-scrollbar {\n        width: 5px;\n    }\n\n    ::-webkit-scrollbar-track {\n        background: none;\n    }\n\n    ::-webkit-scrollbar-thumb {\n        background: ",";\n        border-radius: 5px;\n    }\n\n    ::-webkit-scrollbar-thumb:hover {\n        background: ",";\n    }\n"])),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.mobile}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryHover}))},6768:(e,n,t)=>{t.d(n,{c:()=>c});var r,l=t(4312);const c=t(360).cp.div(r||(r=(0,l.c)(["\n    user-select: none;\n    cursor: pointer;\n    padding: 2px;\n    border-radius: 5px;\n\n    &:hover {\n        background: ",";\n    }\n"])),(e=>{let{theme:n}=e;return n.primaryHover}))},5100:(e,n,t)=>{t.d(n,{c:()=>c});var r,l=t(4312);const c=t(360).cp.nav(r||(r=(0,l.c)(["\n    display: flex;\n    background-color: ",";\n    position: relative;\n    padding: 5px;\n    margin: 5px;\n    border-radius: 20px;\n\n    flex-wrap: wrap;\n    justify-content: center;\n"])),(e=>{let{theme:n}=e;return n.primaryHover}))}}]);
//# sourceMappingURL=888.b798d61b.chunk.js.map