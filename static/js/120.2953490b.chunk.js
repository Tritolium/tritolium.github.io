"use strict";(self.webpackChunkspz_planner=self.webpackChunkspz_planner||[]).push([[120],{2120:(e,n,t)=>{t.r(n),t.d(n,{default:()=>f});var l,a=t(5043),r=t(262),s=t(3410),i=t(7528),c=t(403);const o=c.Ay.div(l||(l=(0,i.A)(["\n    border-radius: 5px;\n    padding: 5px 10px;\n    background: ",";\n    color: ",";\n    margin: 2px;\n    text-align: center;\n    width: fit-content;\n    font-size: 1.25em;\n    cursor: default;\n\n    :hover {\n        color: ",";\n    }\n"])),(e=>{let{theme:n}=e;return n.primaryHover}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryDark}));var d,u=t(3163),h=t(4294);const m=c.Ay.form(d||(d=(0,i.A)(["\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    flex-wrap: nowrap;\n\n    @media screen and (max-width: 720px) {\n        flex-direction: column;\n        > select {\n            width: 100%\n        }\n    }\n\n    > select {\n        max-height: 40px;\n        padding: 5px;\n        margin: 5px;\n    }\n    > img {\n        padding: 2px;\n        min-height: 21px;\n        height: 10vh;\n        max-height: 64px;\n    }\n"])));var p=t(591),x=t(5467),v=t(579);const b=e=>{let{theme:n}=e;const[t,l]=(0,a.useState)(-1),[r,s]=(0,a.useState)(!1),[i,c]=(0,a.useState)(new Array(0)),[d,b]=(0,a.useState)(new Array(0)),[g,k]=(0,a.useState)(new Array(0)),[j,f]=(0,a.useState)(-1);(0,a.useEffect)((()=>{(async()=>{let e=await(0,u.kQ)("current");b(e)})(),(async()=>{let e=await(0,u.iT)();k(e)})(),(async()=>{let e=await(0,u.iJ)();e=e.filter((e=>(0,x._m)(6,e.Association_ID))),c(e),f(e[0].Usergroup_ID)})()}),[]);const w=(0,a.useCallback)(((e,n)=>{l(n)}),[]),y=(0,a.useCallback)((e=>{f(parseInt(e.target.value))}),[f]);return(0,v.jsxs)(m,{children:[(0,v.jsx)("select",{id:"usergroup_select",onChange:y,children:i.map((e=>(0,v.jsx)("option",{value:e.Usergroup_ID,children:e.Title},"usergroup_".concat(e.Usergroup_ID))))}),(0,v.jsx)("select",{id:"event_select",children:d.filter((e=>-1===j||e.Usergroup_ID===j)).map((e=>(0,v.jsxs)("option",{value:e.Event_ID,children:[e.Date,": ",e.Type," ",e.Location]},"event_".concat(e.Event_ID))))}),(0,v.jsx)("select",{id:"member_select",children:g.filter((e=>{if(-1===j)return!0;for(let n of e.Usergroups)if(parseInt(n.Usergroup_ID)===j)return n.Assigned;return!1})).map((e=>(0,v.jsxs)("option",{value:e.Member_ID,children:[e.Forename," ",e.Surname]},"member_".concat(e.Member_ID))))}),(0,v.jsx)(h.Ay,{states:3,attendence:t,onClick:w,theme:n}),(0,v.jsx)(p.A,{plusOne:r,onClick:()=>{s(!r)},active:1===t,theme:n}),(0,v.jsx)(o,{type:"submit",onClick:()=>{let e=document.getElementById("event_select"),n=document.getElementById("member_select"),l=e.options[e.selectedIndex].value,a=n.options[n.selectedIndex].value;(0,u.ie)(l,a,t,r)},children:"Abschicken"})]})},g=(0,a.lazy)((()=>t.e(322).then(t.bind(t,8322)))),k=(0,a.lazy)((()=>Promise.all([t.e(58),t.e(880)]).then(t.bind(t,9880)))),j=e=>{const n={0:(0,v.jsx)(g,{fullname:e.fullname,theme:e.theme}),1:(0,v.jsx)(k,{theme:e.theme}),2:(0,v.jsx)(b,{theme:e.theme})};return(0,v.jsx)(a.Suspense,{fallback:(0,v.jsx)("div",{children:"L\xe4dt..."}),children:n[e.view]})},f=e=>{const[n,t]=(0,a.useState)(0),l=e=>{let n=e.target.id.split("_")[2];t(parseInt(n))},i=[{id:"date_button_0",label:"Eingabe",permitted:!0},{id:"date_button_1",label:"\xdcbersicht",permitted:(0,x._m)(7)},{id:"date_button_2",label:"manuelle Eingabe",permitted:(0,x._m)(6)}];return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(s.A,{children:i.map((e=>{let{id:n,label:t,permitted:a}=e;return a&&(0,v.jsx)(r.default,{type:"button",id:n,onClick:l,children:t},n)}))}),(0,v.jsx)(j,{view:n,fullname:e.fullname,theme:e.theme})]})}},4294:(e,n,t)=>{t.d(n,{Fc:()=>b,hA:()=>p,Jl:()=>x,Ug:()=>j,hf:()=>v,V9:()=>k,j_:()=>f,KB:()=>g,Ay:()=>y});var l,a=t(5043),r=t(423),s=t(5394),i=t(7528);const c=t(403).Ay.div(l||(l=(0,i.A)(["\n\n    position: relative;\n    height: 64px;\n    width: 64px;\n\n    :nth-child(1) {\n        z-index: 3;\n    }\n\n    :nth-child(1) {\n        z-index: 2;\n    }\n\n    .IconWrapper {\n        position: absolute;\n    }\n\n    svg {\n        height: 100%;\n        width: 100%;\n    }\n\n    .LoadingSpinner {\n        animation: spin 1s linear infinite;\n\n        @keyframes spin {\n            0% {transform: rotate(0deg);}\n            100% {transform: rotate(360deg);}\n        }\n    }\n"])));var o=t(3441),d=t(3156),u=t(2661),h=t(579);const m=e=>{switch(e.attendence){default:case-1:return(0,h.jsx)(p,{callback:e.callback,theme:e.theme});case 0:return(0,h.jsx)(v,{callback:e.callback,theme:e.theme});case 1:return(0,h.jsx)(x,{callback:e.callback,theme:e.theme});case 2:return(0,h.jsx)(b,{callback:e.callback,theme:e.theme})}},p=e=>{let{callback:n,size:t,theme:l}=e;return(0,h.jsxs)(o.Vx.Provider,{value:{color:l.blue,className:"IconWrapper"},children:[(0,h.jsx)(r.Edw,{size:"100%",onClick:n}),(0,h.jsx)(w,{callback:n})]})},x=e=>{let{callback:n,theme:t}=e;return(0,h.jsxs)(o.Vx.Provider,{value:{color:t.green,className:"IconWrapper"},children:[(0,h.jsx)(s.G3G,{size:"100%",onClick:n}),(0,h.jsx)(w,{callback:n})]})},v=e=>{let{callback:n,theme:t}=e;return(0,h.jsxs)(o.Vx.Provider,{value:{color:t.red,className:"IconWrapper"},children:[(0,h.jsx)(r.cW1,{size:"100%",onClick:n}),(0,h.jsx)(w,{callback:n})]})},b=e=>{let{callback:n,theme:t}=e;return(0,h.jsxs)(o.Vx.Provider,{value:{color:t.yellow,className:"IconWrapper"},children:[(0,h.jsx)(r.Edw,{size:"100%",onClick:n}),(0,h.jsx)(w,{callback:n})]})},g=e=>{let{callback:n}=e;return(0,h.jsxs)(o.Vx.Provider,{value:{color:"#904c77",className:"IconWrapper"},children:[(0,h.jsx)(r.wMi,{size:"100%",onClick:n}),(0,h.jsx)(w,{callback:n})]})},k=e=>{let{callback:n}=e;return(0,h.jsxs)(o.Vx.Provider,{value:{color:"#7d7abc",className:"IconWrapper"},children:[(0,h.jsx)(r.Edw,{size:"100%",onClick:n}),(0,h.jsx)(w,{callback:n})]})},j=e=>{let{callback:n}=e;return(0,h.jsxs)(o.Vx.Provider,{value:{color:"#00bd00",className:"IconWrapper"},children:[(0,h.jsx)(r.cW1,{size:"100%",onClick:n}),(0,h.jsx)(w,{callback:n})]})},f=e=>{let{callback:n,theme:t,className:l=""}=e;return(0,h.jsxs)(o.Vx.Provider,{value:{color:"white",className:"IconWrapper ".concat(l)},children:[(0,h.jsx)(d.waN,{size:"50%",onClick:n}),(0,h.jsx)(w,{callback:n,fill:t.greenRGB,r:"40.625%"})]})},w=e=>{let{callback:n,fill:t="white",r:l="35%"}=e;return(0,h.jsx)("svg",{size:"100%",className:"IconWrapper",children:(0,h.jsx)("circle",{cx:"50%",cy:"50%",r:l,fill:t,onClick:n})})},y=e=>{const[n,t]=(0,a.useState)(e.attendence),[l,r]=(0,a.useState)(!1),s=(0,a.useCallback)((async()=>{var l;let a=new Date,s=void 0!==e.event?new Date(null===(l=e.event)||void 0===l?void 0:l.Date):void 0;if(s&&e.event.Begin){var i;if(s.setHours(e.event.Begin.split(":")[0]),s.setMinutes(e.event.Begin.split(":")[1]),a.getTime()>s.getTime())return void alert("Du kannst deine Zusage nicht mehr \xe4ndern, da der Termin bereits begonnen hat. Solltest du vergessen haben abzusagen, schick bitte eine WhatsApp.");if("event"===(null===(i=e.event)||void 0===i?void 0:i.Category)&&a.getTime()>s.getTime()-54e5)return void alert("Du kannst deine Zusage nicht mehr \xe4ndern, da der Termin in weniger als 1,5 Stunden beginnt. Schick bitte eine WhatsApp zum An- oder Abmelden.")}let c=(n+1)%e.states;r(!0),await e.onClick(e.event_id,c),r(!1),t(c)}),[e,n]);return(0,a.useEffect)((()=>{t(e.attendence)}),[e.attendence]),(0,h.jsxs)(c,{className:"Terminzusage",children:[e.cancelled?(0,h.jsx)(m,{attendence:0,theme:e.theme}):(0,h.jsx)(m,{callback:s,attendence:n,theme:e.theme}),l?(0,h.jsx)(u.vTn,{className:"LoadingSpinner"}):null]})}},3410:(e,n,t)=>{t.d(n,{A:()=>r});var l,a=t(7528);const r=t(403).Ay.nav(l||(l=(0,a.A)(["\n    display: flex;\n    background-color: ",";\n    position: relative;\n    padding: 5px;\n    margin: 5px;\n    border-radius: 20px;\n\n    flex-wrap: wrap;\n    justify-content: center;\n"])),(e=>{let{theme:n}=e;return n.primaryHover}))},591:(e,n,t)=>{t.d(n,{A:()=>d});var l,a=t(3441),r=t(3156),s=t(7528);const i=t(403).Ay.div.attrs((e=>({className:e.className})))(l||(l=(0,s.A)(["\n    position: relative;\n    height: 64px;\n    width: 64px;\n\n    :nth-child(1) {\n        z-index: 3;\n    }\n\n    :nth-child(1) {\n        z-index: 2;\n    }\n\n    .IconWrapper {\n        position: absolute;\n        max-width: 64px;\n    }\n\n    .UserIcon {\n        top: 25%;\n        left: 25%;\n        height: 50%;\n        width: 50%;\n    }\n\n    svg {\n        top: 0;\n        height: 100%;\n        width: 100%;\n    }\n"])));var c=t(579);const o=e=>{let{callback:n,active:t,theme:l}=e;return(0,c.jsx)("svg",{className:"IconWrapper",children:(0,c.jsx)("circle",{cx:"50%",cy:"50%",r:"40.625%",fill:t?l.greenRGB:l.blue,onClick:n})})},d=e=>{let{active:n,plusOne:t,onClick:l,theme:s,className:d}=e;return(0,c.jsx)(i,{className:d,children:(0,c.jsxs)(a.Vx.Provider,{value:{color:"white",className:"IconWrapper UserIcon"},children:[t&&n?(0,c.jsx)(r.waN,{onClick:l,size:"50%"}):(0,c.jsx)(r.x$1,{size:"50%",onClick:l}),(0,c.jsx)(o,{callback:l,active:n,theme:s})]})})}},5467:(e,n,t)=>{t.d(n,{_m:()=>l,sx:()=>a});const l=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const t=JSON.parse(localStorage.getItem("permissions")||"{}");var l;if(null===n){for(let a in t)if(t[a].includes(e))return!0}else if(null!==(l=t[n])&&void 0!==l&&l.includes(e))return!0;return!1},a=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(let t of e)if(l(t,n))return!0;return!1}}}]);
//# sourceMappingURL=120.2953490b.chunk.js.map