"use strict";(self.webpackChunkspz_planner=self.webpackChunkspz_planner||[]).push([[604],{5604:function(e,n,t){t.r(n),t.d(n,{default:function(){return S}});var r,i=t(4165),a=t(5861),c=t(885),l=t(2791),o=t(9126),d=t(8014),s=t(4373),h=t(1578),u=t(7763),x=t(5085),f=t(71),j=t(7480),p=t(168),m=t(7924).ZP.div(r||(r=(0,p.Z)(["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    @media (min-width: ",") {\n        align-items: center;\n    }\n    align-items: stretch;\n    \n    select {\n        width: fit-content;\n        align-self: center;\n    }\n\n    #thead-desktop {\n        display: none;\n        @media (min-width: ",") {\n            display: table-header-group;\n        }\n    }\n\n    #thead-mobile {\n        display: table-header-group;\n        @media (min-width: ",") {\n            display: none;\n        }\n    }\n\n    table {\n        @media (min-width: ",") {\n            width: fit-content;\n\n            th {\n                padding: 5px;\n            }\n        }\n        \n        td {\n            text-align: center;\n        }\n    }\n"])),(function(e){return e.theme.mobile}),(function(e){return e.theme.mobile}),(function(e){return e.theme.mobile}),(function(e){return e.theme.mobile})),g=t(6856),v=t(7918),b=t(184),w=function(e){switch(e.state){default:case 0:return(0,b.jsx)(g.Swe,{});case 1:return(0,b.jsx)(h.u5D,{});case 2:return(0,b.jsx)(o.Reu,{})}},k=function(e){var n=e.order,t=e.reload,r=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=localStorage.getItem("api_token"),e.next=3,fetch("".concat(v.ho,"/api/order.php?api_token=").concat(r,"&id=").concat(n.Order_ID),{method:"PUT",body:JSON.stringify({Order_State:n.Order_State})});case 3:t();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=localStorage.getItem("api_token"),e.next=3,fetch("".concat(v.ho,"/api/order.php?api_token=").concat(r,"&id=").concat(n.Order_ID),{method:"DELETE"});case 3:t();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();switch(n.Order_State){case 0:return(0,b.jsxs)("td",{children:[(0,b.jsx)(u.default,{onClick:r,children:"bestellt?"}),(0,b.jsx)("br",{}),(0,b.jsx)(u.default,{onClick:c,children:"stornieren"})]});case 1:return(0,b.jsx)("td",{children:(0,b.jsx)(u.default,{onClick:r,children:"geliefert?"})});default:return(0,b.jsx)(b.Fragment,{})}},Z=function(e){var n=e.orders,t=e.reload,r=e.own,i=localStorage.getItem("auth_level");return n.map((function(e){return(0,b.jsxs)("tr",{children:[r?(0,b.jsx)(b.Fragment,{}):(0,b.jsxs)("td",{children:[e.Forename," ",e.Surname[0],"."]}),(0,b.jsx)("td",{children:e.Article}),(0,b.jsx)("td",{children:e.Size}),(0,b.jsx)("td",{children:e.Count}),(0,b.jsx)("td",{children:e.Placed}),(0,b.jsx)("td",{children:e.Ordered}),(0,b.jsx)("td",{children:e.Info}),(0,b.jsx)("td",{children:(0,b.jsx)(w,{state:e.Order_State})}),i>1?(0,b.jsx)(k,{order:e,reload:t}):(0,b.jsx)(b.Fragment,{})]},"order_".concat(e.Order_ID))}))},y=function(e){var n=e.orders,t=e.reload,r=e.own;return(0,b.jsxs)("table",{children:[(0,b.jsx)("thead",{id:"thead-desktop",children:(0,b.jsxs)("tr",{children:[r?(0,b.jsx)(b.Fragment,{}):(0,b.jsx)("th",{children:"Name"}),(0,b.jsx)("th",{children:"Artikel"}),(0,b.jsx)("th",{children:"Gr\xf6\xdfe"}),(0,b.jsx)("th",{children:"Anzahl"}),(0,b.jsx)("th",{children:"Angefordert am"}),(0,b.jsx)("th",{children:"Bestellt am"}),(0,b.jsx)("th",{children:"Notiz"}),(0,b.jsx)("th",{children:"Status"})]})}),(0,b.jsx)("thead",{id:"thead-mobile",children:(0,b.jsxs)("tr",{children:[r?(0,b.jsx)(b.Fragment,{}):(0,b.jsx)("th",{children:(0,b.jsx)(o.HHm,{})}),(0,b.jsx)("th",{children:(0,b.jsx)(o.gH_,{})}),(0,b.jsx)("th",{children:(0,b.jsx)(s.cGE,{})}),(0,b.jsx)("th",{children:(0,b.jsx)(o.nvr,{})}),(0,b.jsx)("th",{children:(0,b.jsx)(o.KvO,{})}),(0,b.jsx)("th",{children:(0,b.jsx)(o.Zqb,{})}),(0,b.jsx)("th",{children:(0,b.jsx)(h.u9E,{})}),(0,b.jsx)("th",{children:(0,b.jsx)(d.QE_,{})})]})}),(0,b.jsx)("tbody",{children:(0,b.jsx)(Z,{orders:n,reload:t,own:r})})]})},_=function(e){var n=e.reload,t=localStorage.getItem("api_token"),r=function(e){e.preventDefault();var r=document.getElementById("article").value,i=document.getElementById("size").value,a=document.getElementById("count").value,c=document.getElementById("info").value;fetch("".concat(v.ho,"/api/order.php?api_token=").concat(t),{method:"POST",body:JSON.stringify({Article:r,Size:i,Count:a,Info:c})}).then((function(e){if(!e.ok)throw new Error(e.status);n(),alert("Bestellung eingereicht"),document.getElementById("order_form").reset()})).catch((function(e){alert(e)}))};return(0,b.jsx)("div",{children:(0,b.jsxs)(f.Z,{id:"order_form",onSubmit:r,children:[(0,b.jsxs)(j.Z,{children:[(0,b.jsx)("label",{htmlFor:"article",children:"Was?"}),(0,b.jsx)("input",{type:"text",name:"article",id:"article"})]}),(0,b.jsxs)(j.Z,{children:[(0,b.jsx)("label",{htmlFor:"size",children:"Gr\xf6\xdfe?"}),(0,b.jsx)("input",{type:"text",name:"size",id:"size"})]}),(0,b.jsxs)(j.Z,{children:[(0,b.jsx)("label",{htmlFor:"count",children:"Anzahl?"}),(0,b.jsx)("input",{type:"number",name:"count",id:"count"})]}),(0,b.jsxs)(j.Z,{children:[(0,b.jsx)("label",{htmlFor:"info",children:"Notiz"}),(0,b.jsx)("input",{type:"text",name:"info",id:"info"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(u.default,{onClick:function(e){e.preventDefault(),document.getElementById("order_form").reset()},children:"Abbrechen"}),(0,b.jsx)(u.default,{onClick:r,children:"Anfragen"})]})]})})},S=function(){var e=[{value:"own",label:"Eigen"},{value:"all",label:"Alle"}],n=localStorage.getItem("api_token"),t=localStorage.getItem("auth_level"),r=(0,l.useState)(new Array(0)),o=(0,c.Z)(r,2),d=o[0],s=o[1],h=(0,l.useState)(e[0].value),u=(0,c.Z)(h,2),f=u[0],j=u[1],p=(0,l.useCallback)((0,a.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t="own"===f?"".concat(v.ho,"/api/order.php?api_token=").concat(n,"&own"):"".concat(v.ho,"/api/order.php?api_token=").concat(n),fetch(t).then((function(e){if(!e.ok)throw new Error(e.status);return e.json()})).then((function(e){s(e)}),(function(){s(new Array(0))})).catch((function(e){}));case 2:case"end":return e.stop()}}),e)}))),[n,f]),g=(0,l.useCallback)((function(e){j(e.target.value)}),[j]),w=(0,l.useCallback)((function(){p()}),[p]);return(0,l.useEffect)((function(){p()}),[p]),(0,b.jsxs)(m,{children:[t>1?(0,b.jsx)(x.Z,{options:e,onChange:g}):(0,b.jsx)(b.Fragment,{}),d.length?(0,b.jsx)(y,{orders:d,reload:w,own:"own"===f}):(0,b.jsx)(b.Fragment,{}),(0,b.jsx)(_,{reload:w})]})}},5085:function(e,n,t){var r=t(2791),i=t(184);n.Z=function(e){var n=(0,r.useCallback)((function(n){e.onChange(n)}),[e]);return(0,i.jsx)("select",{onChange:n,children:e.options.map((function(e,n){return(0,i.jsx)("option",{value:e.value,children:e.label},n)}))})}},71:function(e,n,t){var r,i=t(168),a=t(7924).ZP.form(r||(r=(0,i.Z)(["\n    display: block;\n    width: 100%;\n    padding: 5px;\n"])));n.Z=a},7480:function(e,n,t){var r,i=t(168),a=t(7924).ZP.div(r||(r=(0,i.Z)(["\n    display: block;\n    padding: 2px;\n    label {\n        float: left;\n        width: 25%;\n        min-width: 100px;\n    }\n"])));n.Z=a}}]);
//# sourceMappingURL=604.d62cf9cf.chunk.js.map