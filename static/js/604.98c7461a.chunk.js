"use strict";(self.webpackChunkspz_planner=self.webpackChunkspz_planner||[]).push([[604,763],{5604:function(e,n,t){t.r(n),t.d(n,{default:function(){return S}});var r,i=t(5861),a=t(885),l=t(7757),o=t.n(l),c=t(2791),d=t(9126),s=t(8014),u=t(4373),h=t(1578),x=t(7763),f=t(5085),m=t(71),j=t(7480),p=t(168),g=t(6031).ZP.div(r||(r=(0,p.Z)(["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    @media (min-width: ",") {\n        align-items: center;\n    }\n    align-items: stretch;\n    \n    select {\n        width: fit-content;\n        align-self: center;\n    }\n\n    #thead-desktop {\n        display: none;\n        @media (min-width: ",") {\n            display: table-header-group;\n        }\n    }\n\n    #thead-mobile {\n        display: table-header-group;\n        @media (min-width: ",") {\n            display: none;\n        }\n    }\n\n    table {\n        @media (min-width: ",") {\n            width: fit-content;\n\n            th {\n                padding: 5px;\n            }\n        }\n        \n        td {\n            text-align: center;\n        }\n    }\n"])),(function(e){return e.theme.mobile}),(function(e){return e.theme.mobile}),(function(e){return e.theme.mobile}),(function(e){return e.theme.mobile})),b=t(6856),v=t(184),w=function(e){switch(e.state){default:case 0:return(0,v.jsx)(b.Swe,{});case 1:return(0,v.jsx)(h.u5D,{});case 2:return(0,v.jsx)(d.Reu,{})}},k=function(e){var n=e.order,t=e.reload,r=function(){var e=(0,i.Z)(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",r=localStorage.getItem("api_token"),e.next=4,fetch("".concat("","/api/order.php?api_token=").concat(r,"&id=").concat(n.Order_ID),{method:"PUT",body:JSON.stringify({Order_State:n.Order_State})});case 4:t();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();switch(n.Order_State){case 0:return(0,v.jsx)("td",{children:(0,v.jsx)(x.default,{onClick:r,children:"bestellt?"})});case 1:return(0,v.jsx)("td",{children:(0,v.jsx)(x.default,{onClick:r,children:"geliefert?"})});default:return(0,v.jsx)(v.Fragment,{})}},y=function(e){var n=e.orders,t=e.reload,r=e.own,i=localStorage.getItem("auth_level");return n.map((function(e){return(0,v.jsxs)("tr",{children:[r?(0,v.jsx)(v.Fragment,{}):(0,v.jsxs)("td",{children:[e.Forename," ",e.Surname[0],"."]}),(0,v.jsx)("td",{children:e.Article}),(0,v.jsx)("td",{children:e.Size}),(0,v.jsx)("td",{children:e.Count}),(0,v.jsx)("td",{children:e.Placed}),(0,v.jsx)("td",{children:e.Ordered}),(0,v.jsx)("td",{children:e.Info}),(0,v.jsx)("td",{children:(0,v.jsx)(w,{state:e.Order_State})}),i>1?(0,v.jsx)(k,{order:e,reload:t}):(0,v.jsx)(v.Fragment,{})]},"order_".concat(e.Order_ID))}))},_=function(e){var n=e.orders,t=e.reload,r=e.own;return(0,v.jsxs)("table",{children:[(0,v.jsx)("thead",{id:"thead-desktop",children:(0,v.jsxs)("tr",{children:[r?(0,v.jsx)(v.Fragment,{}):(0,v.jsx)("th",{children:"Name"}),(0,v.jsx)("th",{children:"Artikel"}),(0,v.jsx)("th",{children:"Gr\xf6\xdfe"}),(0,v.jsx)("th",{children:"Anzahl"}),(0,v.jsx)("th",{children:"Angefordert am"}),(0,v.jsx)("th",{children:"Bestellt am"}),(0,v.jsx)("th",{children:"Notiz"}),(0,v.jsx)("th",{children:"Status"})]})}),(0,v.jsx)("thead",{id:"thead-mobile",children:(0,v.jsxs)("tr",{children:[r?(0,v.jsx)(v.Fragment,{}):(0,v.jsx)("th",{children:(0,v.jsx)(d.HHm,{})}),(0,v.jsx)("th",{children:(0,v.jsx)(d.gH_,{})}),(0,v.jsx)("th",{children:(0,v.jsx)(u.cGE,{})}),(0,v.jsx)("th",{children:(0,v.jsx)(d.nvr,{})}),(0,v.jsx)("th",{children:(0,v.jsx)(d.KvO,{})}),(0,v.jsx)("th",{children:(0,v.jsx)(d.Zqb,{})}),(0,v.jsx)("th",{children:(0,v.jsx)(h.u9E,{})}),(0,v.jsx)("th",{children:(0,v.jsx)(s.QE_,{})})]})}),(0,v.jsx)("tbody",{children:(0,v.jsx)(y,{orders:n,reload:t,own:r})})]})},Z=function(e){var n=e.reload,t=localStorage.getItem("api_token"),r=function(e){e.preventDefault();var r=document.getElementById("article").value,i=document.getElementById("size").value,a=document.getElementById("count").value,l=document.getElementById("info").value;fetch("".concat("","/api/order.php?api_token=").concat(t),{method:"POST",body:JSON.stringify({Article:r,Size:i,Count:a,Info:l})}).then((function(e){if(!e.ok)throw new Error(e.status);n(),alert("Bestellung eingereicht"),document.getElementById("order_form").reset()})).catch((function(e){alert(e)}))};return(0,v.jsx)("div",{children:(0,v.jsxs)(m.Z,{id:"order_form",onsubmit:r,children:[(0,v.jsxs)(j.Z,{children:[(0,v.jsx)("label",{htmlFor:"article",children:"Was?"}),(0,v.jsx)("input",{type:"text",name:"article",id:"article"})]}),(0,v.jsxs)(j.Z,{children:[(0,v.jsx)("label",{htmlFor:"size",children:"Gr\xf6\xdfe?"}),(0,v.jsx)("input",{type:"text",name:"size",id:"size"})]}),(0,v.jsxs)(j.Z,{children:[(0,v.jsx)("label",{htmlFor:"count",children:"Anzahl?"}),(0,v.jsx)("input",{type:"number",name:"count",id:"count"})]}),(0,v.jsxs)(j.Z,{children:[(0,v.jsx)("label",{htmlFor:"info",children:"Notiz"}),(0,v.jsx)("input",{type:"text",name:"info",id:"info"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)(x.default,{onClick:function(e){e.preventDefault(),document.getElementById("order_form").reset()},children:"Abbrechen"}),(0,v.jsx)(x.default,{onClick:r,children:"Anfragen"})]})]})})},S=function(){var e=[{value:"own",label:"Eigen"},{value:"all",label:"Alle"}],n=localStorage.getItem("api_token"),t=localStorage.getItem("auth_level"),r=(0,c.useState)(new Array(0)),l=(0,a.Z)(r,2),d=l[0],s=l[1],u=(0,c.useState)(e[0].value),h=(0,a.Z)(u,2),x=h[0],m=h[1],j=(0,c.useCallback)((0,i.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t="own"===x?"".concat("","/api/order.php?api_token=").concat(n,"&own"):"".concat("","/api/order.php?api_token=").concat(n),fetch(t).then((function(e){if(!e.ok)throw new Error(e.status);return e.json()})).then((function(e){s(e)}),(function(){s(new Array(0))})).catch((function(e){}));case 2:case"end":return e.stop()}}),e)}))),["",n,x]),p=(0,c.useCallback)((function(e){m(e.target.value)}),[m]),b=(0,c.useCallback)((function(){j()}),[j]);return(0,c.useEffect)((function(){j()}),[j]),(0,v.jsxs)(g,{children:[t>1?(0,v.jsx)(f.Z,{options:e,onChange:p}):(0,v.jsx)(v.Fragment,{}),d.length?(0,v.jsx)(_,{orders:d,reload:b,own:"own"===x}):(0,v.jsx)(v.Fragment,{}),(0,v.jsx)(Z,{reload:b})]})}},5085:function(e,n,t){var r=t(2791),i=t(184);n.Z=function(e){var n=(0,r.useCallback)((function(n){e.onChange(n)}),[e]);return(0,i.jsx)("select",{onChange:n,children:e.options.map((function(e,n){return(0,i.jsx)("option",{value:e.value,children:e.label},n)}))})}},7763:function(e,n,t){t.r(n);var r,i=t(168),a=t(6031).ZP.button(r||(r=(0,i.Z)(["\n    font-size: ",";\n    font-weight: bold;\n    letter-spacing: 0.05rem;\n    color: ",";\n    background: ",";\n    border: none;\n    border-radius: 15px;\n    padding: 2px 5px;\n    margin: 2px;\n    text-align: center;\n    transition: color 0.3s linear\n\n    @media (max-width: ",") {\n        font-size: ",";\n        text-align: center;\n    }\n\n    &:hover {\n        color: ",";\n    }\n"])),(function(e){return e.font_size}),(function(e){return e.theme.primaryDark}),(function(e){return e.theme.primaryLight}),(function(e){return e.theme.mobile}),(function(e){return e.font_size}),(function(e){return e.theme.primaryHover}));n.default=a},71:function(e,n,t){var r,i=t(168),a=t(6031).ZP.form(r||(r=(0,i.Z)(["\n    display: block;\n    width: 100%;\n    padding: 5px;\n"])));n.Z=a},7480:function(e,n,t){var r,i=t(168),a=t(6031).ZP.div(r||(r=(0,i.Z)(["\n    display: block;\n    padding: 2px;\n    label {\n        float: left;\n        width: 25%;\n        min-width: 100px;\n    }\n"])));n.Z=a}}]);
//# sourceMappingURL=604.98c7461a.chunk.js.map