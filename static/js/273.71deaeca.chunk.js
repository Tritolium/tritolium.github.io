"use strict";(self.webpackChunkspz_planner=self.webpackChunkspz_planner||[]).push([[273,484],{5144:(e,n,t)=>{t.d(n,{c:()=>s});var a=t(2496);const r=e=>{switch(e){default:return"";case 0:return"Sonntag";case 1:return"Montag";case 2:return"Dienstag";case 3:return"Mittwoch";case 4:return"Donnerstag";case 5:return"Freitag";case 6:return"Samstag"}},l=e=>{switch(e){default:return"";case 0:return"Januar";case 1:return"Februar";case 2:return"M\xe4rz";case 3:return"April";case 4:return"Mai";case 5:return"Juni";case 6:return"Juli";case 7:return"August";case 8:return"September";case 9:return"Oktober";case 10:return"November";case 11:return"Dezember"}},s=e=>{let{dateprops:n}=e;const t=new Date(n.Date),s=r(t.getDay()),i=t.getDate(),c=t.getMonth(),d=t.getFullYear();return(0,a.jsxs)("div",{children:[n.Type," ",n.Location,(0,a.jsx)("br",{}),i,". ",l(c)," ",d,(0,a.jsx)("br",{}),s]})}},1552:(e,n,t)=>{t.d(n,{_C:()=>g,gZ:()=>m,m_:()=>p,eI:()=>k,Mn:()=>j,oH:()=>b,_:()=>f,mS:()=>v,cp:()=>y});var a,r=t(9060),l=t(912),s=t(6792),i=t(4312);const c=t(360).cp.div(a||(a=(0,i.c)(["\n\n    position: relative;\n    height: 64px;\n    width: 64px;\n\n    :nth-child(1) {\n        z-index: 3;\n    }\n\n    :nth-child(1) {\n        z-index: 2;\n    }\n\n    .IconWrapper {\n        position: absolute;\n    }\n\n    svg {\n        height: 100%;\n        width: 100%;\n    }\n\n    .LoadingSpinner {\n        animation: spin 1s linear infinite;\n\n        @keyframes spin {\n            0% {transform: rotate(0deg);}\n            100% {transform: rotate(360deg);}\n        }\n    }\n"])));var d=t(2320),o=t(5840),h=t(5164),u=t(2496);const x=e=>{switch(e.attendence){default:case-1:return(0,u.jsx)(m,{callback:e.callback,theme:e.theme});case 0:return(0,u.jsx)(j,{callback:e.callback,theme:e.theme});case 1:return(0,u.jsx)(p,{callback:e.callback,theme:e.theme});case 2:return(0,u.jsx)(g,{callback:e.callback,theme:e.theme})}},m=e=>{let{callback:n,size:t,theme:a}=e;return(0,u.jsxs)(d.mU.Provider,{value:{color:a.blue,className:"IconWrapper"},children:[(0,u.jsx)(l.eMC,{size:"100%",onClick:n}),(0,u.jsx)(w,{callback:n})]})},p=e=>{let{callback:n,theme:t}=e;return(0,u.jsxs)(d.mU.Provider,{value:{color:t.green,className:"IconWrapper"},children:[(0,u.jsx)(s.onS,{size:"100%",onClick:n}),(0,u.jsx)(w,{callback:n})]})},j=e=>{let{callback:n,theme:t}=e;return(0,u.jsxs)(d.mU.Provider,{value:{color:t.red,className:"IconWrapper"},children:[(0,u.jsx)(l.Cwp,{size:"100%",onClick:n}),(0,u.jsx)(w,{callback:n})]})},g=e=>{let{callback:n,theme:t}=e;return(0,u.jsxs)(d.mU.Provider,{value:{color:t.yellow,className:"IconWrapper"},children:[(0,u.jsx)(l.eMC,{size:"100%",onClick:n}),(0,u.jsx)(w,{callback:n})]})},v=e=>{let{callback:n}=e;return(0,u.jsxs)(d.mU.Provider,{value:{color:"#904c77",className:"IconWrapper"},children:[(0,u.jsx)(l.olx,{size:"100%",onClick:n}),(0,u.jsx)(w,{callback:n})]})},b=e=>{let{callback:n}=e;return(0,u.jsxs)(d.mU.Provider,{value:{color:"#7d7abc",className:"IconWrapper"},children:[(0,u.jsx)(l.eMC,{size:"100%",onClick:n}),(0,u.jsx)(w,{callback:n})]})},k=e=>{let{callback:n}=e;return(0,u.jsxs)(d.mU.Provider,{value:{color:"#00bd00",className:"IconWrapper"},children:[(0,u.jsx)(l.Cwp,{size:"100%",onClick:n}),(0,u.jsx)(w,{callback:n})]})},f=e=>{let{callback:n,theme:t,className:a=""}=e;return(0,u.jsxs)(d.mU.Provider,{value:{color:"white",className:"IconWrapper ".concat(a)},children:[(0,u.jsx)(o.o1r,{size:"50%",onClick:n}),(0,u.jsx)(w,{callback:n,fill:t.greenRGB,r:"40.625%"})]})},w=e=>{let{callback:n,fill:t="white",r:a="35%"}=e;return(0,u.jsx)("svg",{size:"100%",className:"IconWrapper",children:(0,u.jsx)("circle",{cx:"50%",cy:"50%",r:a,fill:t,onClick:n})})},y=e=>{const[n,t]=(0,r.useState)(e.attendence),[a,l]=(0,r.useState)(!1),s=(0,r.useCallback)((async()=>{var a;let r=new Date,s=void 0!==e.event?new Date(null===(a=e.event)||void 0===a?void 0:a.Date):void 0;if(s){var i;if(s.setHours(e.event.Begin.split(":")[0]),s.setMinutes(e.event.Begin.split(":")[1]),r.getTime()>s.getTime())return void alert("Du kannst deine Zusage nicht mehr \xe4ndern, da der Termin bereits begonnen hat. Solltest du vergessen haben abzusagen, schick bitte eine WhatsApp.");if("event"===(null===(i=e.event)||void 0===i?void 0:i.Category)&&r.getTime()>s.getTime()-54e5)return void alert("Du kannst deine Zusage nicht mehr \xe4ndern, da der Termin in weniger als 1,5 Stunden beginnt. Schick bitte eine WhatsApp zum An- oder Abmelden.")}let c=(n+1)%e.states;l(!0),await e.onClick(e.event_id,c),l(!1),t(c)}),[e,n]);return(0,r.useEffect)((()=>{t(e.attendence)}),[e.attendence]),(0,u.jsxs)(c,{className:"Terminzusage",children:[e.cancelled?(0,u.jsx)(x,{attendence:0,theme:e.theme}):(0,u.jsx)(x,{callback:s,attendence:n,theme:e.theme}),a?(0,u.jsx)(h.cdQ,{className:"LoadingSpinner"}):null]})}},6484:(e,n,t)=>{t.r(n),t.d(n,{Zusage:()=>C,default:()=>I});var a,r,l,s,i=t(9060),c=t(2024),d=t(5144),o=t(4312),h=t(360);const u=h.cp.div(a||(a=(0,o.c)(["\n    display: flex;\n    flex-direction: column;\n    align-content: center;\n    margin: auto;\n    align-items: center;\n\n    select {\n        width: fit-content;\n    }\n"]))),x=h.cp.div(r||(r=(0,o.c)(["\n    display: grid;\n    border-bottom: 1px solid ",";\n\n    .Date {\n        grid-row: 1;\n    }\n\n    .NameTag {\n        grid-row: 1;\n        font-weight: bold;\n        padding: 2px;\n        cursor: pointer;\n    }\n\n    .NameTagActive {\n        grid-row: 1;\n        font-weight: bold;\n        padding: 2px;\n        cursor: pointer;\n        background-color: ",";\n        color: ",";\n        border-radius: 5px;\n        border: 1px solid ",";\n        cursor: pointer;\n    }\n\n    .DateTag {\n        text-align: center;\n        border-left: 1px solid ",";\n        border-top: 1px solid ",";\n    }\n\n    .AttendenceTag {\n        position: relative;\n        min-width: 32px;\n        min-height: 32px;\n        padding: 5px;\n\n        border-left: 1px solid ",";\n        border-top: 1px solid ",";\n\n        :nth-child(1) {\n            z-index: 3;\n        }\n    }\n\n    .Last {\n        border-right: 1px solid ",";\n    }\n\n    .IconWrapper {\n        width: 32px;\n        height: 32px;\n        position: absolute;\n\n        left: 50%;\n        top: 50%;\n\n        transform: translateX(-50%) translateY(-50%);\n    }\n\n    .PlusOneIcon {\n        width: 18px;\n    }\n\n    @media (max-width: ",") {\n        display: none;\n    }\n"])),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryDark}),(e=>{let{theme:n}=e;return n.primaryDark}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.mobile})),m=h.cp.table(l||(l=(0,o.c)(["\n    border-collapse: collapse;\n    position: relative;\n    margin: 0 2px 0 2px;\n\n    tr {\n        max-height: 100px;\n    }\n\n    td {\n        text-align: center;\n        border: 1px solid ",";\n\n        > img {\n            min-width: 15px;\n            width: 100%;\n            max-width: 30px;\n        }\n    }\n\n    @media (max-width: ",") {\n        thead, td {\n            display: none;\n        }\n    }\n"])),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.mobile})),p=h.cp.div(s||(s=(0,o.c)(["\n    @media (min-width: ",") {\n        div {\n            display: none;\n        }\n    }\n"])),(e=>{let{theme:n}=e;return n.mobile}));var j=t(7872),g=t(9080),v=t(2496);const b=e=>{let{event:n,theme:t}=e;j.kR.register(j.gv,j.KW,j.kX,j.OY,j.o5,j.o9);const a={labels:[""],datasets:[{data:[n.Consent],backgroundColor:t.greenRGB},{data:[n.Missing],backgroundColor:t.blueRGB},{data:[n.Maybe],backgroundColor:t.yellowRGB},{data:[n.Refusal],backgroundColor:t.redRGB}]};return(0,v.jsxs)(p,{children:[(0,v.jsx)(d.c,{dateprops:n}),(0,v.jsx)(g.UM,{height:"60px",options:{indexAxis:"y",plugins:{title:{display:!1},legend:{display:!1}},responsive:!1,scales:{x:{stacked:!0,display:!1},y:{stacked:!0}}},data:a})]})};var k=t(1552),f=t(6792);const w=e=>{let{attendences:n,theme:t}=e;return(0,v.jsxs)(x,{children:[(0,v.jsx)("span",{className:"Date",children:"Termin:"}),n[0].Attendences.map((e=>(0,v.jsx)(y,{Fullname:e.Fullname},e.Fullname))),n.map((e=>(0,v.jsxs)(i.Fragment,{children:[(0,v.jsx)("span",{className:"DateTag",children:(0,v.jsx)(d.c,{dateprops:e})},e.Event_ID),e.Attendences.map(((n,a)=>{const r=a===e.Attendences.length-1?"AttendenceTag Last":"AttendenceTag";return(0,v.jsx)("span",{className:r,children:(0,v.jsx)(C,{attendence:n.Attendence,plusone:n.PlusOne,theme:t})},n.Fullname+e.Event_ID)}))]},"row_".concat(e.Event_ID))))]})},y=e=>{let{Fullname:n}=e;const[t,a]=(0,i.useState)(!1),r=n.split(" ")[0].slice(0,2)+n.split(" ")[1][0];return(0,v.jsx)("span",{className:t?"NameTagActive":"NameTag",onClick:()=>{a(!t)},children:t?n:r})},C=e=>{let{attendence:n,plusone:t,theme:a}=e;if(1===n&&1===t)return(0,v.jsx)(k._,{theme:a,className:"PlusOneIcon"});switch(n){default:case-1:return(0,v.jsx)(k.gZ,{theme:a});case 0:return(0,v.jsx)(k.Mn,{theme:a});case 1:return(0,v.jsx)(k.m_,{theme:a});case 2:return(0,v.jsx)(k._C,{theme:a})}},_=e=>{let{evaluation:n,theme:t}=e;return(0,v.jsxs)(m,{children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Termin"}),(0,v.jsx)("th",{colSpan:2,children:"Zu."}),(0,v.jsx)("th",{children:"Ab."}),(0,v.jsx)("th",{children:"Aus."}),(0,v.jsx)("th",{children:"Vllt."}),(0,v.jsx)("th",{children:"M"}),(0,v.jsx)("th",{children:"S"}),(0,v.jsx)("th",{children:"A"}),(0,v.jsx)("th",{children:"D"}),(0,v.jsx)("th",{children:"T"}),(0,v.jsx)("th",{children:"L"}),(0,v.jsx)("th",{children:"Tr"}),(0,v.jsx)("th",{children:"B"}),(0,v.jsx)("th",{children:"P"})]})}),(0,v.jsx)("tbody",{children:n.map((e=>(0,v.jsx)(D,{event:e,theme:t},"eval_".concat(e.Event_ID))))})]})},D=e=>{let{event:n,theme:t}=e;return(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:(0,v.jsx)(d.c,{dateprops:n})}),(0,v.jsx)("td",{colSpan:n.PlusOne?1:2,children:n.Consent}),n.PlusOne?(0,v.jsxs)("td",{children:["+",n.PlusOne]}):(0,v.jsx)(v.Fragment,{}),(0,v.jsx)("td",{children:n.Refusal}),(0,v.jsx)("td",{children:n.Missing}),(0,v.jsx)("td",{children:n.Maybe}),(0,v.jsx)("td",{children:n.Instruments.Major}),(0,v.jsx)("td",{children:n.Instruments.Sopran}),(0,v.jsx)("td",{children:n.Instruments.Diskant}),(0,v.jsx)("td",{children:n.Instruments.Alt}),(0,v.jsx)("td",{children:n.Instruments.Tenor}),(0,v.jsx)("td",{children:n.Instruments.Lyra}),(0,v.jsx)("td",{children:n.Instruments.Trommel}),(0,v.jsx)("td",{children:n.Instruments.Becken}),(0,v.jsx)("td",{children:n.Instruments.Pauke}),(0,v.jsx)(b,{event:n,theme:t})]})},I=e=>{let{theme:n}=e;const[t,a]=(0,i.useState)(new Array(0)),[r,l]=(0,i.useState)(),[s,d]=(0,i.useState)(new Array(0)),[o,h]=(0,i.useState)(new Array(0)),x=(0,i.useCallback)((async()=>{let e=await(0,c.Ip)(r);d(e)}),[r]),m=(0,i.useCallback)((async()=>{let e=await(0,c.e6)(r);h(e)}),[r]),p=(0,i.useCallback)((e=>{l(e.target.value)}),[l]),j=(0,i.useCallback)((()=>{x(),m()}),[x,m]);return(0,i.useEffect)((()=>{(async()=>{let e=await(0,c.EP)();a(e)})(),j()}),[j]),0===s.length?(0,v.jsx)("select",{name:"usergroup",id:"usergroup_select",onChange:p,children:t.map(((e,n)=>(0,v.jsx)("option",{value:e.Usergroup_ID,children:e.Title},n)))}):(0,v.jsxs)(u,{children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("select",{name:"usergroup",id:"usergroup_select",onChange:p,children:t.map(((e,n)=>(0,v.jsx)("option",{value:e.Usergroup_ID,children:e.Title},n)))}),(0,v.jsx)(f.ktH,{onClick:j})]}),(0,v.jsx)(w,{attendences:s,theme:n}),(0,v.jsx)(_,{evaluation:o,theme:n})]})}},273:(e,n,t)=>{t.r(n),t.d(n,{default:()=>M});var a,r=t(9060),l=t(2024),s=t(3876),i=t(5256),c=t(6768),d=t(7952),o=t(2680),h=t(9020),u=t(6484),x=t(4312),m=t(360);const p=m.cp.div(a||(a=(0,x.c)(["\n\n    display: flex;\n    flex-direction: row;\n    position: relative;\n    width: 100%;\n\n    td {\n        text-align: center;\n        min-width: 32px;\n    }\n\n    :nth-child(1) {\n        z-index: 3;\n    }\n\n    :nth-child(1) {\n        z-index: 2;\n    }\n\n    .IconWrapper {\n        min-width: 1.5em;\n        max-width: 32px;\n        min-height: 1.5em;\n        max-height: 32px;\n        position: absolute;\n\n        transform: translateX(-50%) translateY(-50%);\n    }\n\n    @media (max-width: ",") {\n        flex-direction: column;\n        table {\n            width: 100%;\n        }\n    }\n"])),(e=>{let{theme:n}=e;return n.mobile}));var j=t(1552),g=t(2496);const v=e=>{let{events:n,onSelect:t,usergroups:a}=e;const l=[{value:"all",label:"Alle"},...a.map((e=>({value:e.Usergroup_ID,label:e.Title})))],[c,d]=(0,r.useState)(l[0].value),o=(0,r.useCallback)((e=>{d(e.target.value)}),[]);return(0,g.jsxs)(s.c,{children:[(0,g.jsx)("div",{children:(0,g.jsx)(i.c,{options:l,onChange:o})}),n.filter((e=>e.Accepted&&!e.Type.includes("Abgesagt")&&!e.Evaluated)).filter((e=>{let n=new Date,t=new Date(e.Date);return null!==e.Begin&&t.setHours(null===e||void 0===e?void 0:e.Begin.split(":")[0],null===e||void 0===e?void 0:e.Begin.split(":")[1],0,0),t<n})).filter((e=>"all"===c||parseInt(e.Usergroup_ID)===parseInt(c))).map((e=>(0,g.jsx)(b,{event:e,onSelect:t},"event_".concat(e.Event_ID))))]})},b=e=>{let{event:n,onSelect:t}=e;const a=(0,r.useCallback)((()=>{t(n.Event_ID)}),[t,n.Event_ID]);return(0,g.jsxs)(c.c,{onClick:a,children:[n.Type," ",n.Location]})},k=e=>{let{event:n,reload:t,theme:a}=e;const[s,i]=(0,r.useState)(new Array(0)),[c,x]=(0,r.useState)({}),m=(0,r.useCallback)((async()=>{void 0!==n&&fetch("".concat(l.sZ,"/api/v0/attendenceeval/").concat(null===n||void 0===n?void 0:n.Event_ID,"?api_token=").concat(localStorage.getItem("api_token"))).then((e=>e.json())).then((e=>{i(e);let n={};for(let t of e)switch(t.Attendence){default:case-1:n[t.Member_ID]=0;break;case 0:n[t.Member_ID]=2;break;case 1:n[t.Member_ID]=3;break;case 2:n[t.Member_ID]=2}x(n)}))}),[n]),p=(0,r.useCallback)(((e,n)=>{let t={...c};t[e]=n,x(t)}),[c]);(0,r.useEffect)((()=>{m()}),[m]);return(0,g.jsxs)(o.c,{id:"evaluation_form",children:[null===n||void 0===n?void 0:n.Type," ",null===n||void 0===n?void 0:n.Location," ",null===n||void 0===n?void 0:n.Date,(0,g.jsxs)(h.o,{children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{children:"Name"}),(0,g.jsx)("th",{children:"Angabe"}),(0,g.jsx)("th",{children:"Tats\xe4chlich"})]})}),(0,g.jsx)("tbody",{children:s.sort(((e,n)=>e.Fullname.split(" ")[1]<n.Fullname.split(" ")[1]?-1:e.Fullname.split(" ")[1]>n.Fullname.split(" ")[1]?1:0)).map((e=>(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:e.Fullname}),(0,g.jsx)("td",{children:(0,g.jsx)(u.Zusage,{attendence:e.Attendence,theme:a})}),(0,g.jsx)("td",{children:(0,g.jsx)(f,{member_id:e.Member_ID,attendence:c[e.Member_ID],callback:p,theme:a})})]},"attendence_".concat(e.Member_ID))))})]}),(0,g.jsx)(h.o,{children:(0,g.jsxs)("tbody",{children:[(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:"Unabgemeldet gefehlt"}),(0,g.jsx)("td",{children:(0,g.jsx)(f,{attendence:0,callback:()=>{},theme:a})})]}),(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:"Angemeldet gefehlt"}),(0,g.jsx)("td",{children:(0,g.jsx)(f,{attendence:1,callback:()=>{},theme:a})})]}),(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:"Abgemeldet"}),(0,g.jsx)("td",{children:(0,g.jsx)(f,{attendence:2,callback:()=>{},theme:a})})]}),(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:"Anwesend"}),(0,g.jsx)("td",{children:(0,g.jsx)(f,{attendence:3,callback:()=>{},theme:a})})]}),(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:"Anwesend trotz Abmeldung"}),(0,g.jsx)("td",{children:(0,g.jsx)(f,{attendence:4,callback:()=>{},theme:a})})]})]})}),(0,g.jsxs)("div",{children:[(0,g.jsx)(d.default,{onClick:async e=>{e.preventDefault(),t()},children:"Abbrechen"}),(0,g.jsx)(d.default,{onClick:async e=>{e.preventDefault(),fetch("".concat(l.sZ,"/api/eval.php?event_id=").concat(null===n||void 0===n?void 0:n.Event_ID,"&api_token=").concat(localStorage.getItem("api_token")),{method:"POST",body:JSON.stringify(c)}).then((e=>{200===e.status&&t()}))},children:"Speichern"})]})]})},f=e=>{let{member_id:n,attendence:t,callback:a,theme:l}=e;const s=(0,r.useCallback)((()=>{a(n,(t+1)%5)}),[a,n,t]);switch(t){default:case 0:return(0,g.jsx)(j.mS,{callback:s});case 1:return(0,g.jsx)(j.oH,{callback:s});case 2:return(0,g.jsx)(j.Mn,{callback:s,theme:l});case 3:return(0,g.jsx)(j.m_,{callback:s,theme:l});case 4:return(0,g.jsx)(j.eI,{callback:s})}},w=e=>{let{theme:n}=e;const[t,a]=(0,r.useState)(new Array(0)),[s,i]=(0,r.useState)(new Array(0)),[c,d]=(0,r.useState)(-1),o=(0,r.useCallback)((async()=>{let e=await(0,l.Ki)("all");a(void 0!==e?e:new Array(0))}),[]),h=(0,r.useCallback)((async()=>{let e=await(0,l.ag)();i(void 0!==e?e:new Array(0))}),[]),u=(0,r.useCallback)((()=>{d(-1),o()}),[o]),x=(0,r.useCallback)((e=>{d(e)}),[]);return(0,r.useEffect)((()=>{o(),h()}),[o,h]),(0,g.jsxs)(p,{children:[(0,g.jsx)(v,{events:t,onSelect:x,usergroups:s}),(0,g.jsx)(k,{event:t.find((e=>e.Event_ID===c)),reload:u,theme:n})]})};var y,C=t(5100);const _=m.cp.div(y||(y=(0,x.c)(["\n\n    td, th {\n        text-align: center;\n        min-width: 32px;\n    }\n\n    td:nth-child(1), td:nth-child(2), th:nth-child(1) {\n        border-right: 1px solid ",";\n    }\n\n    td:nth-last-child(3), th:nth-last-child(3) {\n        border-left: 1px solid ",";\n    }\n\n    :nth-child(1) {\n        z-index: 3;\n    }\n\n    :nth-child(1) {\n        z-index: 2;\n    }    \n\n    .IconWrapper {\n        min-width: 1.5em;\n        max-width: 32px;\n        min-height: 1.5em;\n        max-height: 32px;\n        position: absolute;\n\n        transform: translateX(-50%) translateY(-50%);\n    }\n"])),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryLight})),D=e=>{let{evaluations:n,filterFrom:t,filterTo:a,category:r,theme:l}=e;return(0,g.jsxs)(h.o,{children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{colSpan:2,children:"Termin"}),(0,g.jsx)("th",{children:(0,g.jsx)(f,{attendence:0,callback:()=>{},theme:l})}),(0,g.jsx)("th",{children:(0,g.jsx)(f,{attendence:1,callback:()=>{},theme:l})}),(0,g.jsx)("th",{children:(0,g.jsx)(f,{attendence:2,callback:()=>{},theme:l})}),(0,g.jsx)("th",{children:(0,g.jsx)(f,{attendence:3,callback:()=>{},theme:l})}),(0,g.jsx)("th",{children:(0,g.jsx)(f,{attendence:4,callback:()=>{},theme:l})}),(0,g.jsx)("th",{children:(0,g.jsx)(f,{attendence:3,callback:()=>{},theme:l})}),(0,g.jsx)("th",{children:(0,g.jsx)(f,{attendence:2,callback:()=>{},theme:l})}),(0,g.jsx)("th",{children:"%"})]})}),(0,g.jsx)("tbody",{children:n.filter((e=>{if(void 0!==t&&void 0!==a&&""!==t&&""!==a){let n=new Date(e.Date),r=new Date(t),l=new Date(a);return n>=r&&n<=l}return!0})).filter((e=>!1===e.Type.includes("Abgesagt"))).filter((e=>e.Category===r||"all"===r)).map((e=>(0,g.jsx)(I,{evaluation:e},"evaluation_".concat(e.Type,"_").concat(e.Date))))})]})},I=e=>{let{evaluation:n}=e,t=n.Evaluations.filter((e=>3===e.Evaluation||4===e.Evaluation)).length,a=n.Evaluations.filter((e=>-1!==e.Evaluation)).length,r=new Date(n.Date),l=r.getDate()+"."+(r.getMonth()+1)+"."+r.getFullYear();return(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:l}),(0,g.jsxs)("td",{children:[n.Type," ",n.Location]}),(0,g.jsx)("td",{children:n.Evaluations.filter((e=>0===e.Evaluation)).length}),(0,g.jsx)("td",{children:n.Evaluations.filter((e=>1===e.Evaluation)).length}),(0,g.jsx)("td",{children:n.Evaluations.filter((e=>2===e.Evaluation)).length}),(0,g.jsx)("td",{children:n.Evaluations.filter((e=>3===e.Evaluation)).length}),(0,g.jsx)("td",{children:n.Evaluations.filter((e=>4===e.Evaluation)).length}),(0,g.jsx)("td",{children:n.Evaluations.filter((e=>3===e.Evaluation||4===e.Evaluation)).length}),(0,g.jsx)("td",{children:n.Evaluations.filter((e=>!(3===e.Evaluation||4===e.Evaluation||-1===e.Evaluation))).length}),(0,g.jsxs)("td",{children:[t,"/",a," (",Math.round(t/a*100),"%)"]})]})},S=e=>{let{theme:n}=e;const[t,a]=(0,r.useState)(new Array(0)),[s,i]=(0,r.useState)(-1),[c,d]=(0,r.useState)("all"),[o,h]=(0,r.useState)(new Date("2023-11-23").toISOString().split("T")[0]),[u,x]=(0,r.useState)((new Date).toISOString().split("T")[0]),[m,p]=(0,r.useState)(new Array(0)),j=(0,r.useCallback)((async()=>{let e=await(0,l.EP)();a(void 0!==e?e:new Array(0))}),[]),v=(0,r.useCallback)((async()=>{-1!==s&&fetch("".concat(l.sZ,"/api/v0/attendenceeval?api_token=").concat(localStorage.getItem("api_token"),"&usergroup_id=").concat(s)).then((e=>200===e.status?e.json():void 0)).then((e=>{p(void 0===e?new Array(0):e)}))}),[s]),b=(0,r.useCallback)((e=>{i(e.target.value)}),[]),k=(0,r.useCallback)((e=>{d(e.target.value)}),[]),f=(0,r.useCallback)((()=>{v()}),[v]);return(0,r.useEffect)((()=>{j(),f()}),[j,f]),(0,g.jsxs)(_,{children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("select",{name:"usergroup",id:"usergroup",onChange:b,children:t.map((e=>(0,g.jsx)("option",{value:e.Usergroup_ID,children:e.Title},e.Usergroup_ID)))}),(0,g.jsxs)("select",{name:"type",id:"type",onChange:k,children:[(0,g.jsx)("option",{value:"all",children:"Alle"}),(0,g.jsx)("option",{value:"practice",children:"\xdcben/Probe"}),(0,g.jsx)("option",{value:"event",children:"Auftritt"}),(0,g.jsx)("option",{value:"other",children:"sonstige Termine"})]}),(0,g.jsx)("input",{type:"date",defaultValue:"2023-11-23",onChange:e=>{h(e.target.value)}}),(0,g.jsx)("input",{type:"date",defaultValue:u,onChange:e=>{x(e.target.value)}})]}),(0,g.jsx)(D,{evaluations:m,filterFrom:o,filterTo:u,category:c,theme:n})]})};var A;const T=m.cp.div(A||(A=(0,x.c)(["\n    display: flex;\n    flex-direction: column;\n    align-self: flex-start;\n"]))),E=e=>{let{view:n,theme:t}=e;switch(n){default:case 0:return(0,g.jsx)(w,{theme:t});case 1:return(0,g.jsx)(S,{theme:t})}},M=e=>{let{theme:n}=e;const[t,a]=(0,r.useState)(0),l=e=>{switch(e.target.id){default:case"eval_button_0":a(0);break;case"eval_button_1":a(1)}};return(0,g.jsxs)(T,{children:[(0,g.jsxs)(C.c,{children:[(0,g.jsx)(d.default,{id:"eval_button_0",onClick:l,theme:n,children:"Auswertung"}),(0,g.jsx)(d.default,{id:"eval_button_1",onClick:l,theme:n,children:"\xdcbersicht"})]}),(0,g.jsx)(E,{view:t,theme:n})]})}},5256:(e,n,t)=>{t.d(n,{c:()=>l});var a=t(9060),r=t(2496);const l=e=>{const n=(0,a.useCallback)((n=>{e.onChange(n)}),[e]);return(0,r.jsx)("select",{onChange:n,children:e.options.map(((e,n)=>(0,r.jsx)("option",{value:e.value,children:e.label},n)))})}},2680:(e,n,t)=>{t.d(n,{c:()=>l});var a,r=t(4312);const l=t(360).cp.form(a||(a=(0,r.c)(["\n    display: block;\n    width: 100%;\n    padding: 5px;\n"])))},3876:(e,n,t)=>{t.d(n,{c:()=>l});var a,r=t(4312);const l=t(360).cp.nav(a||(a=(0,r.c)(["\n    margin: 2px;\n    padding: 2px;\n    white-space: nowrap;\n    border: 1px solid ",";\n    border-radius: 10px;\n    overflow-y: scroll;\n    max-height: 75vh;\n    min-width: fit-content;\n    width: auto;\n    max-width: fit-content;\n\n\n    @media (max-width: ",") {\n        white-space: normal;\n    }\n\n    ::-webkit-scrollbar {\n        width: 5px;\n    }\n\n    ::-webkit-scrollbar-track {\n        background: none;\n    }\n\n    ::-webkit-scrollbar-thumb {\n        background: ",";\n        border-radius: 5px;\n    }\n\n    ::-webkit-scrollbar-thumb:hover {\n        background: ",";\n    }\n"])),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.mobile}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryHover}))},6768:(e,n,t)=>{t.d(n,{c:()=>l});var a,r=t(4312);const l=t(360).cp.div(a||(a=(0,r.c)(["\n    user-select: none;\n    cursor: pointer;\n    padding: 2px;\n    border-radius: 5px;\n\n    &:hover {\n        background: ",";\n    }\n"])),(e=>{let{theme:n}=e;return n.primaryHover}))},5100:(e,n,t)=>{t.d(n,{c:()=>l});var a,r=t(4312);const l=t(360).cp.nav(a||(a=(0,r.c)(["\n    display: flex;\n    background-color: ",";\n    position: relative;\n    padding: 5px;\n    margin: 5px;\n    border-radius: 20px;\n\n    flex-wrap: wrap;\n    justify-content: center;\n"])),(e=>{let{theme:n}=e;return n.primaryHover}))},9020:(e,n,t)=>{t.d(n,{o:()=>l});var a,r=t(4312);const l=t(360).cp.table(a||(a=(0,r.c)(["\n    margin: 5px;\n    border: 1px solid ",";\n    border-radius: 10px;\n    border-spacing: 0;\n    width: auto;\n\n    th {\n        border-bottom: 1px solid ",";\n        padding: 5px;\n    }\n\n    td {\n        border-top: 1px solid ",";\n        padding: 5px;\n        white-space: nowrap;\n    }\n\n    td:first-child {\n        white-space: normal;\n    }\n"])),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryLight}))}}]);
//# sourceMappingURL=273.71deaeca.chunk.js.map