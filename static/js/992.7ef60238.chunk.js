"use strict";(self.webpackChunkspz_planner=self.webpackChunkspz_planner||[]).push([[992,880],{5396:(e,n,t)=>{t.d(n,{A:()=>s});var a=t(579);const r=e=>{switch(e){default:return"";case 0:return"Sonntag";case 1:return"Montag";case 2:return"Dienstag";case 3:return"Mittwoch";case 4:return"Donnerstag";case 5:return"Freitag";case 6:return"Samstag"}},l=e=>{switch(e){default:return"";case 0:return"Januar";case 1:return"Februar";case 2:return"M\xe4rz";case 3:return"April";case 4:return"Mai";case 5:return"Juni";case 6:return"Juli";case 7:return"August";case 8:return"September";case 9:return"Oktober";case 10:return"November";case 11:return"Dezember"}},s=e=>{let{dateprops:n}=e;const t=new Date(n.Date),s=r(t.getDay()),i=t.getDate(),c=t.getMonth(),o=t.getFullYear();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"event_type",children:[n.Type," ",n.Location]}),(0,a.jsxs)("div",{className:"event_date",children:[i,". ",l(c)," ",o]}),(0,a.jsx)("div",{className:"event_day",children:s})]})}},4294:(e,n,t)=>{t.d(n,{Fc:()=>j,hA:()=>p,Jl:()=>x,Ug:()=>w,hf:()=>g,V9:()=>b,j_:()=>k,KB:()=>v,Ay:()=>y});var a,r=t(5043),l=t(423),s=t(5394),i=t(7528);const c=t(403).Ay.div(a||(a=(0,i.A)(["\n\n    position: relative;\n    height: 64px;\n    width: 64px;\n\n    :nth-child(1) {\n        z-index: 3;\n    }\n\n    :nth-child(1) {\n        z-index: 2;\n    }\n\n    .IconWrapper {\n        position: absolute;\n    }\n\n    svg {\n        height: 100%;\n        width: 100%;\n    }\n\n    .LoadingSpinner {\n        animation: spin 1s linear infinite;\n\n        @keyframes spin {\n            0% {transform: rotate(0deg);}\n            100% {transform: rotate(360deg);}\n        }\n    }\n"])));var o=t(3441),d=t(3156),h=t(2661),u=t(579);const m=e=>{switch(e.attendence){default:case-1:return(0,u.jsx)(p,{callback:e.callback,theme:e.theme});case 0:return(0,u.jsx)(g,{callback:e.callback,theme:e.theme});case 1:return(0,u.jsx)(x,{callback:e.callback,theme:e.theme});case 2:return(0,u.jsx)(j,{callback:e.callback,theme:e.theme})}},p=e=>{let{callback:n,size:t,theme:a}=e;return(0,u.jsxs)(o.Vx.Provider,{value:{color:a.blue,className:"IconWrapper"},children:[(0,u.jsx)(l.Edw,{size:"100%",onClick:n}),(0,u.jsx)(f,{callback:n})]})},x=e=>{let{callback:n,theme:t}=e;return(0,u.jsxs)(o.Vx.Provider,{value:{color:t.green,className:"IconWrapper"},children:[(0,u.jsx)(s.G3G,{size:"100%",onClick:n}),(0,u.jsx)(f,{callback:n})]})},g=e=>{let{callback:n,theme:t}=e;return(0,u.jsxs)(o.Vx.Provider,{value:{color:t.red,className:"IconWrapper"},children:[(0,u.jsx)(l.cW1,{size:"100%",onClick:n}),(0,u.jsx)(f,{callback:n})]})},j=e=>{let{callback:n,theme:t}=e;return(0,u.jsxs)(o.Vx.Provider,{value:{color:t.yellow,className:"IconWrapper"},children:[(0,u.jsx)(l.Edw,{size:"100%",onClick:n}),(0,u.jsx)(f,{callback:n})]})},v=e=>{let{callback:n}=e;return(0,u.jsxs)(o.Vx.Provider,{value:{color:"#904c77",className:"IconWrapper"},children:[(0,u.jsx)(l.wMi,{size:"100%",onClick:n}),(0,u.jsx)(f,{callback:n})]})},b=e=>{let{callback:n}=e;return(0,u.jsxs)(o.Vx.Provider,{value:{color:"#7d7abc",className:"IconWrapper"},children:[(0,u.jsx)(l.Edw,{size:"100%",onClick:n}),(0,u.jsx)(f,{callback:n})]})},w=e=>{let{callback:n}=e;return(0,u.jsxs)(o.Vx.Provider,{value:{color:"#00bd00",className:"IconWrapper"},children:[(0,u.jsx)(l.cW1,{size:"100%",onClick:n}),(0,u.jsx)(f,{callback:n})]})},k=e=>{let{callback:n,theme:t,className:a=""}=e;return(0,u.jsxs)(o.Vx.Provider,{value:{color:"white",className:"IconWrapper ".concat(a)},children:[(0,u.jsx)(d.waN,{size:"50%",onClick:n}),(0,u.jsx)(f,{callback:n,fill:t.greenRGB,r:"40.625%"})]})},f=e=>{let{callback:n,fill:t="white",r:a="35%"}=e;return(0,u.jsx)("svg",{size:"100%",className:"IconWrapper",children:(0,u.jsx)("circle",{cx:"50%",cy:"50%",r:a,fill:t,onClick:n})})},y=e=>{const[n,t]=(0,r.useState)(e.attendence),[a,l]=(0,r.useState)(!1),s=(0,r.useCallback)((async()=>{var a;let r=new Date,s=void 0!==e.event?new Date(null===(a=e.event)||void 0===a?void 0:a.Date):void 0;if(s&&e.event.Begin){var i;if(s.setHours(e.event.Begin.split(":")[0]),s.setMinutes(e.event.Begin.split(":")[1]),r.getTime()>s.getTime())return void alert("Du kannst deine Zusage nicht mehr \xe4ndern, da der Termin bereits begonnen hat. Solltest du vergessen haben abzusagen, schick bitte eine WhatsApp.");if("event"===(null===(i=e.event)||void 0===i?void 0:i.Category)&&r.getTime()>s.getTime()-54e5)return void alert("Du kannst deine Zusage nicht mehr \xe4ndern, da der Termin in weniger als 1,5 Stunden beginnt. Schick bitte eine WhatsApp zum An- oder Abmelden.")}let c=(n+1)%e.states;l(!0),await e.onClick(e.event_id,c),l(!1),t(c)}),[e,n]);return(0,r.useEffect)((()=>{t(e.attendence)}),[e.attendence]),(0,u.jsxs)(c,{className:"Terminzusage",children:[e.cancelled?(0,u.jsx)(m,{attendence:0,theme:e.theme}):(0,u.jsx)(m,{callback:s,attendence:n,theme:e.theme}),a?(0,u.jsx)(h.vTn,{className:"LoadingSpinner"}):null]})}},9880:(e,n,t)=>{t.r(n),t.d(n,{Zusage:()=>A,default:()=>C});var a,r,l,s,i=t(5043),c=t(3163),o=t(5396),d=t(7528),h=t(403);const u=h.Ay.div(a||(a=(0,d.A)(["\n    display: flex;\n    flex-direction: column;\n    align-content: center;\n    margin: auto;\n    align-items: center;\n\n    select {\n        width: fit-content;\n    }\n"]))),m=h.Ay.div(r||(r=(0,d.A)(["\n    display: grid;\n    border-bottom: 1px solid ",";\n    overflox: auto;\n\n    .Header {\n        position: sticky;\n        top: 0;\n        z-index: 8;\n        background-color: ",";\n    }\n\n    .Date {\n        grid-row: 1;\n        grid-column: 1;\n    }\n\n    .NameTag {\n        grid-row: 1;\n        font-weight: bold;\n        padding: 2px;\n        cursor: pointer;\n        border: 1px solid ",";\n    }\n\n    .NameTagActive {\n        grid-row: 1;\n        font-weight: bold;\n        padding: 2px;\n        cursor: pointer;\n        background-color: ",";\n        color: ",";\n        border-radius: 5px;\n        border: 1px solid ",";\n        cursor: pointer;\n    }\n\n    .DateTag {\n        grid-column: 1;\n        text-align: center;\n        border-left: 1px solid ",";\n        border-top: 1px solid ",";\n        border-right: 1px solid ",";\n        position: sticky;\n        left: 0;\n        z-index: 5;\n        background-color: ",";\n    }\n\n    .AttendenceTag {\n        position: relative;\n        min-width: 32px;\n        min-height: 32px;\n        padding: 5px;\n\n        border-left: 1px solid ",";\n        border-top: 1px solid ",";\n\n        :nth-child(1) {\n            z-index: 3;\n        }\n    }\n\n    .Last {\n        border-right: 1px solid ",";\n    }\n\n    .IconWrapper {\n        width: 32px;\n        height: 32px;\n        position: absolute;\n\n        left: 50%;\n        top: 50%;\n\n        transform: translateX(-50%) translateY(-50%);\n    }\n\n    .PlusOneIcon {\n        width: 18px;\n    }\n\n    @media (max-width: ",") {\n        display: none;\n    }\n"])),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryDark}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryDark}),(e=>{let{theme:n}=e;return n.primaryDark}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryDark}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.mobile})),p=h.Ay.table(l||(l=(0,d.A)(["\n    border-collapse: collapse;\n    position: relative;\n    margin: 0 2px 0 2px;\n\n    tr {\n        max-height: 100px;\n    }\n\n    td {\n        text-align: center;\n        border: 1px solid ",";\n\n        > img {\n            min-width: 15px;\n            width: 100%;\n            max-width: 30px;\n        }\n    }\n\n    @media (max-width: ",") {\n        thead, td {\n            display: none;\n        }\n    }\n"])),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.mobile})),x=h.Ay.div(s||(s=(0,d.A)(["\n    @media (min-width: ",") {\n        div {\n            display: none;\n        }\n    }\n"])),(e=>{let{theme:n}=e;return n.mobile}));var g=t(7658),j=t(6058),v=t(579);const b=e=>{let{event:n,theme:t}=e;g.t1.register(g.PP,g.kc,g.E8,g.hE,g.m_,g.s$);const a={labels:[""],datasets:[{data:[n.Consent],backgroundColor:t.greenRGB},{data:[n.ProbAttending],backgroundColor:t.lightgreenRGB},{data:[n.Maybe],backgroundColor:t.yellowRGB},{data:[n.ProbMissing],backgroundColor:t.lightredRGB},{data:[n.Refusal],backgroundColor:t.redRGB}]};return(0,v.jsxs)(x,{children:[(0,v.jsx)(o.A,{dateprops:n}),(0,v.jsx)(j.yP,{height:"60px",options:{indexAxis:"y",plugins:{title:{display:!1},legend:{display:!1}},responsive:!1,scales:{x:{stacked:!0,display:!1},y:{stacked:!0}}},data:a})]})};var w=t(4294),k=t(5394);const f=e=>{let{attendences:n,theme:t}=e;return(0,v.jsxs)(m,{children:[(0,v.jsx)("span",{className:"Date Header",children:"Termin:"}),n[0].Attendences.map((e=>(0,v.jsx)(y,{Fullname:e.Fullname},e.Fullname))),n.map((e=>(0,v.jsxs)(i.Fragment,{children:[(0,v.jsx)("span",{className:"DateTag",children:(0,v.jsx)(o.A,{dateprops:e})},e.Event_ID),e.Attendences.map(((n,a)=>{const r=a===e.Attendences.length-1?"AttendenceTag Last":"AttendenceTag";return(0,v.jsx)("span",{className:r,children:(0,v.jsx)(A,{attendence:n.Attendence,plusone:n.PlusOne,theme:t})},n.Fullname+e.Event_ID)}))]},"row_".concat(e.Event_ID))))]})},y=e=>{let{Fullname:n}=e;const[t,a]=(0,i.useState)(!1),r=n.split(" ")[0].slice(0,2)+n.split(" ")[1][0];return(0,v.jsx)("span",{className:t?"NameTagActive Header":"NameTag Header",onClick:()=>{a(!t)},children:t?n:r})};var _=t(5467);const A=e=>{let{attendence:n,plusone:t,theme:a}=e;if(1===n&&1===t)return(0,v.jsx)(w.j_,{theme:a,className:"PlusOneIcon"});switch(n){default:case-1:return(0,v.jsx)(w.hA,{theme:a});case 0:return(0,v.jsx)(w.hf,{theme:a});case 1:return(0,v.jsx)(w.Jl,{theme:a});case 2:return(0,v.jsx)(w.Fc,{theme:a})}},I=e=>{let{evaluation:n,theme:t}=e;return(0,v.jsxs)(p,{children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Termin"}),(0,v.jsx)("th",{colSpan:2,children:"Zu."}),(0,v.jsx)("th",{children:"Ab."}),(0,v.jsx)("th",{children:"Aus."}),(0,v.jsx)("th",{children:"Vllt."}),(0,v.jsx)("th",{children:"M"}),(0,v.jsx)("th",{children:"S"}),(0,v.jsx)("th",{children:"A"}),(0,v.jsx)("th",{children:"D"}),(0,v.jsx)("th",{children:"T"}),(0,v.jsx)("th",{children:"L"}),(0,v.jsx)("th",{children:"Tr"}),(0,v.jsx)("th",{children:"B"}),(0,v.jsx)("th",{children:"P"})]})}),(0,v.jsx)("tbody",{children:n.map((e=>(0,v.jsx)(D,{event:e,theme:t},"eval_".concat(e.Event_ID))))})]})},D=e=>{let{event:n,theme:t}=e;return(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:(0,v.jsx)(o.A,{dateprops:n})}),(0,v.jsx)("td",{colSpan:n.PlusOne?1:2,children:n.Consent}),n.PlusOne?(0,v.jsxs)("td",{children:["+",n.PlusOne]}):(0,v.jsx)(v.Fragment,{}),(0,v.jsx)("td",{children:n.Refusal}),(0,v.jsx)("td",{children:n.Missing}),(0,v.jsx)("td",{children:n.Maybe}),(0,v.jsx)("td",{children:n.Instruments.Major}),(0,v.jsx)("td",{children:n.Instruments.Sopran}),(0,v.jsx)("td",{children:n.Instruments.Diskant}),(0,v.jsx)("td",{children:n.Instruments.Alt}),(0,v.jsx)("td",{children:n.Instruments.Tenor}),(0,v.jsx)("td",{children:n.Instruments.Lyra}),(0,v.jsx)("td",{children:n.Instruments.Trommel}),(0,v.jsx)("td",{children:n.Instruments.Becken}),(0,v.jsx)("td",{children:n.Instruments.Pauke}),(0,v.jsx)(b,{event:n,theme:t})]})},C=e=>{let{theme:n}=e;const[t,a]=(0,i.useState)(new Array(0)),[r,l]=(0,i.useState)(),[s,o]=(0,i.useState)(new Array(0)),[d,h]=(0,i.useState)(new Array(0)),m=(0,i.useCallback)((async()=>{let e=await(0,c.Kp)(r);o(e)}),[r]),p=(0,i.useCallback)((async()=>{let e=await(0,c.Ms)(r);h(e)}),[r]),x=(0,i.useCallback)((e=>{l(e.target.value)}),[l]),g=(0,i.useCallback)((()=>{m(),p()}),[m,p]);return(0,i.useEffect)((()=>{(async()=>{let e=await(0,c.iJ)();e=e.filter((e=>(0,_._m)(7,e.Association_ID))),a(e)})(),g()}),[g]),0===s.length?(0,v.jsx)("select",{name:"usergroup",id:"usergroup_select",onChange:x,children:t.map(((e,n)=>(0,v.jsx)("option",{value:e.Usergroup_ID,children:e.Title},n)))}):(0,v.jsxs)(u,{children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("select",{name:"usergroup",id:"usergroup_select",onChange:x,children:t.map(((e,n)=>(0,v.jsx)("option",{value:e.Usergroup_ID,children:e.Title},n)))}),(0,v.jsx)(k.UF6,{onClick:g})]}),(0,v.jsx)(f,{attendences:s,theme:n}),(0,v.jsx)(I,{evaluation:d,theme:n})]})}},3992:(e,n,t)=>{t.r(n),t.d(n,{default:()=>P});var a,r=t(5043),l=t(3163),s=t(5709),i=t(3445),c=t(6242),o=t(262),d=t(2930),h=t(6327),u=t(9880),m=t(7528),p=t(403);const x=p.Ay.div(a||(a=(0,m.A)(["\n\n    display: flex;\n    flex-direction: row;\n    position: relative;\n    width: 100%;\n\n    td {\n        text-align: center;\n        min-width: 32px;\n    }\n\n    :nth-child(1) {\n        z-index: 3;\n    }\n\n    :nth-child(1) {\n        z-index: 2;\n    }\n\n    .IconWrapper {\n        min-width: 1.5em;\n        max-width: 32px;\n        min-height: 1.5em;\n        max-height: 32px;\n        position: absolute;\n\n        transform: translateX(-50%) translateY(-50%);\n    }\n\n    @media (max-width: ",") {\n        flex-direction: column;\n        table {\n            width: 100%;\n        }\n    }\n"])),(e=>{let{theme:n}=e;return n.mobile}));var g=t(4294),j=t(5467),v=t(579);const b=e=>{let{events:n,onSelect:t,usergroups:a}=e;const l=[{value:"all",label:"Alle"},...a.map((e=>({value:e.Usergroup_ID,label:e.Title})))],[c,o]=(0,r.useState)(l[0].value),d=(0,r.useCallback)((e=>{o(e.target.value)}),[]);return(0,v.jsxs)(s.A,{children:[(0,v.jsx)("div",{children:(0,v.jsx)(i.A,{options:l,onChange:d})}),n.filter((e=>e.Accepted&&!e.Type.includes("Abgesagt")&&!e.Evaluated&&(0,j._m)(9,e.Association_ID))).filter((e=>{let n=new Date,t=new Date(e.Date);return null!==e.Begin&&t.setHours(null===e||void 0===e?void 0:e.Begin.split(":")[0],null===e||void 0===e?void 0:e.Begin.split(":")[1],0,0),t<n})).filter((e=>"all"===c||parseInt(e.Usergroup_ID)===parseInt(c))).map((e=>(0,v.jsx)(w,{event:e,onSelect:t},"event_".concat(e.Event_ID))))]})},w=e=>{let{event:n,onSelect:t}=e;const a=(0,r.useCallback)((()=>{t(n.Event_ID)}),[t,n.Event_ID]);return(0,v.jsxs)(c.A,{onClick:a,children:[n.Type," ",n.Location]})},k=e=>{let{event:n,reload:t,theme:a}=e;const[s,i]=(0,r.useState)(new Array(0)),[c,m]=(0,r.useState)({}),p=(0,r.useCallback)((async()=>{void 0!==n&&fetch("".concat(l.Hc,"/api/v0/attendenceeval/").concat(null===n||void 0===n?void 0:n.Event_ID,"?api_token=").concat(localStorage.getItem("api_token"))).then((e=>e.json())).then((e=>{i(e);let n={};for(let t of e)switch(t.Attendence){default:case-1:n[t.Member_ID]=0;break;case 0:n[t.Member_ID]=2;break;case 1:n[t.Member_ID]=3;break;case 2:n[t.Member_ID]=2}m(n)}))}),[n]),x=(0,r.useCallback)(((e,n)=>{let t={...c};t[e]=n,m(t)}),[c]);(0,r.useEffect)((()=>{p()}),[p]);return(0,v.jsxs)(d.A,{id:"evaluation_form",children:[null===n||void 0===n?void 0:n.Type," ",null===n||void 0===n?void 0:n.Location," ",null===n||void 0===n?void 0:n.Date,(0,v.jsxs)(h.X,{children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Name"}),(0,v.jsx)("th",{children:"Angabe"}),(0,v.jsx)("th",{children:"Tats\xe4chlich"})]})}),(0,v.jsx)("tbody",{children:s.sort(((e,n)=>e.Fullname.split(" ")[1]<n.Fullname.split(" ")[1]?-1:e.Fullname.split(" ")[1]>n.Fullname.split(" ")[1]?1:0)).map((e=>(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:e.Fullname}),(0,v.jsx)("td",{children:(0,v.jsx)(u.Zusage,{attendence:e.Attendence,theme:a})}),(0,v.jsx)("td",{children:(0,v.jsx)(f,{member_id:e.Member_ID,attendence:c[e.Member_ID],callback:x,theme:a})})]},"attendence_".concat(e.Member_ID))))})]}),(0,v.jsx)(h.X,{children:(0,v.jsxs)("tbody",{children:[(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:"Unabgemeldet gefehlt"}),(0,v.jsx)("td",{children:(0,v.jsx)(f,{attendence:0,callback:()=>{},theme:a})})]}),(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:"Angemeldet gefehlt"}),(0,v.jsx)("td",{children:(0,v.jsx)(f,{attendence:1,callback:()=>{},theme:a})})]}),(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:"Abgemeldet"}),(0,v.jsx)("td",{children:(0,v.jsx)(f,{attendence:2,callback:()=>{},theme:a})})]}),(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:"Anwesend"}),(0,v.jsx)("td",{children:(0,v.jsx)(f,{attendence:3,callback:()=>{},theme:a})})]}),(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:"Anwesend trotz Abmeldung"}),(0,v.jsx)("td",{children:(0,v.jsx)(f,{attendence:4,callback:()=>{},theme:a})})]})]})}),(0,v.jsxs)("div",{children:[(0,v.jsx)(o.default,{onClick:async e=>{e.preventDefault(),t()},children:"Abbrechen"}),(0,v.jsx)(o.default,{onClick:async e=>{e.preventDefault(),fetch("".concat(l.Hc,"/api/eval.php?event_id=").concat(null===n||void 0===n?void 0:n.Event_ID,"&api_token=").concat(localStorage.getItem("api_token")),{method:"POST",body:JSON.stringify(c)}).then((e=>{200===e.status&&t()}))},children:"Speichern"})]})]})},f=e=>{let{member_id:n,attendence:t,callback:a,theme:l}=e;const s=(0,r.useCallback)((()=>{a(n,(t+1)%5)}),[a,n,t]);switch(t){default:case 0:return(0,v.jsx)(g.KB,{callback:s});case 1:return(0,v.jsx)(g.V9,{callback:s});case 2:return(0,v.jsx)(g.hf,{callback:s,theme:l});case 3:return(0,v.jsx)(g.Jl,{callback:s,theme:l});case 4:return(0,v.jsx)(g.Ug,{callback:s})}},y=e=>{let{theme:n}=e;const[t,a]=(0,r.useState)(new Array(0)),[s,i]=(0,r.useState)(new Array(0)),[c,o]=(0,r.useState)(-1),d=(0,r.useCallback)((async()=>{let e=await(0,l.kQ)("all");a(void 0!==e?e:new Array(0))}),[]),h=(0,r.useCallback)((async()=>{let e=await(0,l.iJ)();void 0!==e?(e=e.filter((e=>(0,j._m)(9,e.Association_ID))),i(e)):i(new Array(0))}),[]),u=(0,r.useCallback)((()=>{o(-1),d()}),[d]),m=(0,r.useCallback)((e=>{o(e)}),[]);return(0,r.useEffect)((()=>{d(),h()}),[d,h]),(0,v.jsxs)(x,{children:[(0,v.jsx)(b,{events:t,onSelect:m,usergroups:s}),(0,v.jsx)(k,{event:t.find((e=>e.Event_ID===c)),reload:u,theme:n})]})};var _,A=t(3410),I=t(7196);const D=p.Ay.div(_||(_=(0,m.A)(["\n\n    td, th {\n        text-align: center;\n        min-width: 32px;\n    }\n\n    td:nth-child(1), td:nth-child(2), th:nth-child(1) {\n        border-right: 1px solid ",";\n    }\n\n    td:nth-last-child(4), th:nth-last-child(4) {\n        border-left: 1px solid ",";\n    }\n\n    :nth-child(1) {\n        z-index: 3;\n    }\n\n    :nth-child(1) {\n        z-index: 2;\n    }    \n\n    .IconWrapper {\n        min-width: 1.5em;\n        max-width: 32px;\n        min-height: 1.5em;\n        max-height: 32px;\n        position: absolute;\n\n        transform: translateX(-50%) translateY(-50%);\n    }\n"])),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryLight})),C=e=>{let{evaluations:n,filterFrom:t,filterTo:a,category:r,theme:l}=e;return(0,v.jsxs)(h.X,{children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{colSpan:2,children:"Termin"}),(0,v.jsx)("th",{children:(0,v.jsx)(f,{attendence:0,callback:()=>{},theme:l})}),(0,v.jsx)("th",{children:(0,v.jsx)(f,{attendence:1,callback:()=>{},theme:l})}),(0,v.jsx)("th",{children:(0,v.jsx)(f,{attendence:2,callback:()=>{},theme:l})}),(0,v.jsx)("th",{children:(0,v.jsx)(f,{attendence:3,callback:()=>{},theme:l})}),(0,v.jsx)("th",{children:(0,v.jsx)(f,{attendence:4,callback:()=>{},theme:l})}),(0,v.jsx)("th",{children:(0,v.jsx)(I.iZI,{})}),(0,v.jsx)("th",{children:(0,v.jsx)(f,{attendence:3,callback:()=>{},theme:l})}),(0,v.jsx)("th",{children:(0,v.jsx)(f,{attendence:2,callback:()=>{},theme:l})}),(0,v.jsx)("th",{children:"%"})]})}),(0,v.jsx)("tbody",{children:n.filter((e=>{if(void 0!==t&&void 0!==a&&""!==t&&""!==a){let n=new Date(e.Date),r=new Date(t),l=new Date(a);return n>=r&&n<=l}return!0})).filter((e=>!1===e.Type.includes("Abgesagt"))).filter((e=>e.Category===r||"all"===r)).map((e=>(0,v.jsx)(S,{evaluation:e},"evaluation_".concat(e.Type,"_").concat(e.Date))))})]})},S=e=>{let{evaluation:n}=e,t=n.Evaluations.filter((e=>3===e.Evaluation||4===e.Evaluation)).length,a=n.Evaluations.filter((e=>-1!==e.Evaluation)).length,r=new Date(n.Date),l=r.getDate()+"."+(r.getMonth()+1)+"."+r.getFullYear();return(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:l}),(0,v.jsxs)("td",{children:[n.Type," ",n.Location]}),(0,v.jsx)("td",{children:n.Evaluations.filter((e=>0===e.Evaluation)).length}),(0,v.jsx)("td",{children:n.Evaluations.filter((e=>1===e.Evaluation)).length}),(0,v.jsx)("td",{children:n.Evaluations.filter((e=>2===e.Evaluation)).length}),(0,v.jsx)("td",{children:n.Evaluations.filter((e=>3===e.Evaluation)).length}),(0,v.jsx)("td",{children:n.Evaluations.filter((e=>4===e.Evaluation)).length}),(0,v.jsx)("td",{children:n.Prediction}),(0,v.jsx)("td",{children:n.Evaluations.filter((e=>3===e.Evaluation||4===e.Evaluation)).length}),(0,v.jsx)("td",{children:n.Evaluations.filter((e=>!(3===e.Evaluation||4===e.Evaluation||-1===e.Evaluation))).length}),(0,v.jsxs)("td",{children:[t,"/",a," (",Math.round(t/a*100),"%)"]})]})},E=e=>{let{theme:n}=e;const[t,a]=(0,r.useState)(new Array(0)),[s,i]=(0,r.useState)(-1),[c,o]=(0,r.useState)("all"),[d,h]=(0,r.useState)(new Date("2023-11-23").toISOString().split("T")[0]),[u,m]=(0,r.useState)((new Date).toISOString().split("T")[0]),[p,x]=(0,r.useState)(new Array(0)),g=(0,r.useCallback)((async()=>{let e=await(0,l.iJ)();void 0!==e?(e=e.filter((e=>(0,j._m)(8,e.Association_ID))),a(e)):a(new Array(0))}),[]),b=(0,r.useCallback)((async()=>{-1!==s&&fetch("".concat(l.Hc,"/api/v0/attendenceeval?api_token=").concat(localStorage.getItem("api_token"),"&usergroup_id=").concat(s)).then((e=>200===e.status?e.json():void 0)).then((e=>{x(void 0===e?new Array(0):e)}))}),[s]),w=(0,r.useCallback)((e=>{i(e.target.value)}),[]),k=(0,r.useCallback)((e=>{o(e.target.value)}),[]),f=(0,r.useCallback)((()=>{b()}),[b]);return(0,r.useEffect)((()=>{g(),f()}),[g,f]),(0,r.useEffect)((()=>{let e=new Date,n=new Date("2023-11-23"),t=new Date(e.getFullYear()-1,e.getMonth(),e.getDate());t>n&&h(t.toISOString().split("T")[0])}),[d]),(0,v.jsxs)(D,{children:[(0,v.jsxs)("div",{children:[(0,v.jsxs)("select",{name:"usergroup",id:"usergroup",onChange:w,children:[(0,v.jsx)("option",{value:-1,children:"Gruppe ausw\xe4hlen"}),t.map((e=>(0,v.jsx)("option",{value:e.Usergroup_ID,children:e.Title},e.Usergroup_ID)))]}),(0,v.jsxs)("select",{name:"type",id:"type",onChange:k,children:[(0,v.jsx)("option",{value:"all",children:"Alle"}),(0,v.jsx)("option",{value:"practice",children:"\xdcben/Probe"}),(0,v.jsx)("option",{value:"event",children:"Auftritt"}),(0,v.jsx)("option",{value:"other",children:"sonstige Termine"})]}),(0,v.jsx)("input",{type:"date",defaultValue:d,onChange:e=>{h(e.target.value)}}),(0,v.jsx)("input",{type:"date",defaultValue:u,onChange:e=>{m(e.target.value)}})]}),(0,v.jsx)(C,{evaluations:p,filterFrom:d,filterTo:u,category:c,theme:n})]})};var T;const L=p.Ay.div(T||(T=(0,m.A)(["\n    display: flex;\n    flex-direction: column;\n"]))),M=e=>{let{usergroup:n,evaluation:t}=e,a=0,l=0;const s=(e,n)=>({missing:(e[n][0]||0)+(e[n][1]||0)+(e[n][2]||0),attendance:(e[n][3]||0)+(e[n][4]||0),wout_notice:(e[n][0]||0)+(e[n][1]||0)}),i=(e,n,t)=>Math.round((e+n)/(e+t+n)*100),c=e=>e<0?"rgb(192, 0, 0)":["rgb(255, 0, 0)","rgb(255, 64, 0)","rgb(255, 128, 0)","rgb(255, 192, 0)","rgb(255, 255, 0)","rgb(192, 255, 0)","rgb(128, 255, 0)","rgb(0, 212, 0)","rgb(0, 170, 0)","rgb(0, 128, 0)"][Math.min(e,9)];(0,r.useEffect)((()=>{const e=document.getElementById("ugroup_rating_".concat(n).toLocaleLowerCase()),t=document.getElementById("event_rating_".concat(n).toLocaleLowerCase()),a=document.getElementById("practice_rating_".concat(n).toLocaleLowerCase()),r=document.getElementById("other_rating_".concat(n).toLocaleLowerCase());if(t){let e=parseInt(t.innerText.split(" ")[8].slice(0,-1));e=Math.floor(e/10),t.style.color=c(e)}if(a){let e=parseInt(a.innerText.split(" ")[8].slice(0,-1));e=Math.floor(e/10),a.style.color=c(e)}if(r){let e=parseInt(r.innerText.split(" ")[8].slice(0,-1));e=Math.floor(e/10),r.style.color=c(e)}if(e){let n=parseInt(e.innerText.split(" ")[1].slice(0,-1));n=Math.floor(n/10),e.style.color=c(n)}}),[n,a]);const o={attendence:0,missing:0,wout_notice:0,percentage:0,wout_percentage:0,rating:0,less:0,more:0,equal:0,comparrison:0},d={attendence:0,missing:0,wout_notice:0,percentage:0,wout_percentage:0,rating:0,less:0,more:0,equal:0,comparrison:0},h={attendence:0,missing:0,wout_notice:0,percentage:0,wout_percentage:0,rating:0,less:0,more:0,equal:0,comparrison:0};o.less=t.event.less,d.less=t.practice.less,h.less=t.other.less,o.more=t.event.more,d.more=t.practice.more,h.more=t.other.more,o.equal=t.event.equal,d.equal=t.practice.equal,h.equal=t.other.equal,o.comparrison=i(o.less,o.equal,o.more),d.comparrison=i(d.less,d.equal,d.more),h.comparrison=i(h.less,h.equal,h.more);for(let r in t)switch(r){case"event":({missing:o.missing,attendance:o.attendence,wout_notice:o.wout_notice}=s(t,r));break;case"practice":({missing:d.missing,attendance:d.attendence,wout_notice:d.wout_notice}=s(t,r));break;case"other":({missing:h.missing,attendance:h.attendence,wout_notice:h.wout_notice}=s(t,r))}if(0!==o.attendence||0!==d.attendence||0!==h.attendence)return o.percentage=Math.round(o.attendence/(o.attendence+o.missing)*100),d.percentage=Math.round(d.attendence/(d.attendence+d.missing)*100),h.percentage=Math.round(h.attendence/(h.attendence+h.missing)*100),o.wout_percentage=Math.round(o.wout_notice/(o.attendence+o.missing)*100),d.wout_percentage=Math.round(d.wout_notice/(d.attendence+d.missing)*100),h.wout_percentage=Math.round(h.wout_notice/(h.attendence+h.missing)*100),o.rating=Math.round((4*o.percentage+o.comparrison+20*(10-o.wout_percentage))/7),d.rating=Math.round((4*d.percentage+d.comparrison+20*(10-d.wout_percentage))/7),h.rating=Math.round((4*h.percentage+h.comparrison+20*(10-h.wout_percentage))/7),o.attendence>0&&(a+=4*o.rating,l+=4),d.attendence>0&&(a+=2*d.rating,l+=2),h.attendence>0&&(a+=1*h.rating,l+=1),a=Math.round(a/l),(0,v.jsxs)("div",{children:[(0,v.jsx)("h1",{children:n}),o.attendence>0&&(0,v.jsxs)("p",{id:"event_rating_".concat(n).toLocaleLowerCase(),children:["Auftritte Teilname: ",o.percentage,"%, Unentschuldigt: ",o.wout_percentage,"% Vergleich: ",o.comparrison,"%, gesamt: ",o.rating,"%"]}),d.attendence>0&&(0,v.jsxs)("p",{id:"practice_rating_".concat(n).toLocaleLowerCase(),children:["Proben Teilname: ",d.percentage,"%, Unentschuldigt: ",d.wout_percentage,"% Vergleich: ",d.comparrison,"%, gesamt: ",d.rating,"%"]}),h.attendence>0&&(0,v.jsxs)("p",{id:"other_rating_".concat(n).toLocaleLowerCase(),children:["Sonstige Teilname: ",h.percentage,"%, Unentschuldigt: ",h.wout_percentage,"% Vergleich: ",h.comparrison,"%, gesamt: ",h.rating,"%"]}),(0,v.jsxs)("p",{id:"ugroup_rating_".concat(n).toLocaleLowerCase(),children:["Gesamtbewertung: ",a,"%"]})]})},N=e=>{let{theme:n}=e;const[t,a]=(0,r.useState)(new Array(0)),[s,i]=(0,r.useState)(2024),c=(0,r.useCallback)((async()=>{fetch("".concat(l.Hc,"/api/v0/p_evaluation?year=").concat(s,"&api_token=").concat(localStorage.getItem("api_token"))).then((e=>e.json())).then((e=>{a(e)}))}),[s]);return(0,r.useEffect)((()=>{c()}),[s,c]),(0,v.jsxs)("div",{children:[(0,v.jsxs)("select",{onChange:e=>{i(e.target.value)},children:[(0,v.jsx)("option",{value:"2024",children:"2024"}),(0,v.jsx)("option",{value:"2025",children:"2025"})]}),Object.keys(t).map((e=>(0,v.jsx)(M,{usergroup:e,evaluation:t[e]},e)))]})},z=e=>{let{view:n,theme:t}=e;return{0:(0,v.jsx)(N,{theme:t}),1:(0,v.jsx)(E,{theme:t}),2:(0,v.jsx)(y,{theme:t})}[n]||(0,v.jsx)(y,{theme:t})},P=e=>{let{theme:n}=e;const[t,a]=(0,r.useState)(0),l=[{id:"evaluation_button_0",label:"Meine \xdcbersicht",permitted:!0},{id:"evaluation_button_1",label:"\xdcbersicht",permitted:(0,j._m)(8)},{id:"evaluation_button_2",label:"Auswertung",permitted:(0,j._m)(9)}],s=e=>{let n=e.target.id.split("_")[2];a(parseInt(n))};return(0,v.jsxs)(L,{children:[(0,v.jsx)(A.A,{children:l.map((e=>{let{id:t,label:a,permitted:r}=e;return r&&(0,v.jsx)(o.default,{id:t,onClick:s,theme:n,children:a},t)}))}),(0,v.jsx)(z,{view:t,theme:n})]})}},3445:(e,n,t)=>{t.d(n,{A:()=>l});var a=t(5043),r=t(579);const l=e=>{const n=(0,a.useCallback)((n=>{e.onChange(n)}),[e]);return(0,r.jsx)("select",{onChange:n,children:e.options.map(((e,n)=>(0,r.jsx)("option",{value:e.value,children:e.label},n)))})}},2930:(e,n,t)=>{t.d(n,{A:()=>l});var a,r=t(7528);const l=t(403).Ay.form(a||(a=(0,r.A)(["\n    display: block;\n    width: 100%;\n    padding: 5px;\n"])))},5709:(e,n,t)=>{t.d(n,{A:()=>l});var a,r=t(7528);const l=t(403).Ay.nav(a||(a=(0,r.A)(["\n    margin: 2px;\n    padding: 2px;\n    white-space: nowrap;\n    border: 1px solid ",";\n    border-radius: 10px;\n    overflow-y: scroll;\n    max-height: 75vh;\n    min-width: fit-content;\n    width: auto;\n    max-width: fit-content;\n\n\n    @media (max-width: ",") {\n        white-space: normal;\n    }\n\n    ::-webkit-scrollbar {\n        width: 5px;\n    }\n\n    ::-webkit-scrollbar-track {\n        background: none;\n    }\n\n    ::-webkit-scrollbar-thumb {\n        background: ",";\n        border-radius: 5px;\n    }\n\n    ::-webkit-scrollbar-thumb:hover {\n        background: ",";\n    }\n"])),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.mobile}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryHover}))},6242:(e,n,t)=>{t.d(n,{A:()=>l});var a,r=t(7528);const l=t(403).Ay.div(a||(a=(0,r.A)(["\n    user-select: none;\n    cursor: pointer;\n    padding: 2px;\n    border-radius: 5px;\n\n    &:hover {\n        background: ",";\n    }\n"])),(e=>{let{theme:n}=e;return n.primaryHover}))},3410:(e,n,t)=>{t.d(n,{A:()=>l});var a,r=t(7528);const l=t(403).Ay.nav(a||(a=(0,r.A)(["\n    display: flex;\n    background-color: ",";\n    position: relative;\n    padding: 5px;\n    margin: 5px;\n    border-radius: 20px;\n\n    flex-wrap: wrap;\n    justify-content: center;\n"])),(e=>{let{theme:n}=e;return n.primaryHover}))},6327:(e,n,t)=>{t.d(n,{X:()=>l});var a,r=t(7528);const l=t(403).Ay.table(a||(a=(0,r.A)(["\n    margin: 5px;\n    border: 1px solid ",";\n    border-radius: 10px;\n    border-spacing: 0;\n    width: auto;\n\n    th {\n        border-bottom: 1px solid ",";\n        padding: 5px;\n    }\n\n    td {\n        border-top: 1px solid ",";\n        padding: 5px;\n        white-space: nowrap;\n    }\n\n    td:first-child {\n        white-space: normal;\n    }\n"])),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryLight}))},5467:(e,n,t)=>{t.d(n,{_m:()=>a,sx:()=>r});const a=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const t=JSON.parse(localStorage.getItem("permissions")||"{}");var a;if(null===n){for(let r in t)if(t[r].includes(e))return!0}else if(null!==(a=t[n])&&void 0!==a&&a.includes(e))return!0;return!1},r=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(let t of e)if(a(t,n))return!0;return!1}}}]);
//# sourceMappingURL=992.7ef60238.chunk.js.map