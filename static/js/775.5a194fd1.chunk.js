"use strict";(self.webpackChunkspz_planner=self.webpackChunkspz_planner||[]).push([[775],{5775:(e,n,t)=>{t.r(n),t.d(n,{default:()=>A});var l,r,a=t(5043),i=t(262),o=t(2930),s=t(7921),d=t(5709),c=t(3163),m=t(7528),u=t(403);const h=u.Ay.div(l||(l=(0,m.A)(["\n    display: flex;\n    flex-direction: row;\n    position: relative;\n    width: 100%;\n\n    form {\n        display: flex;\n        flex-direction: column;\n    }\n"]))),p=u.Ay.div(r||(r=(0,m.A)(["\n    user-select: none;\n    cursor: pointer;\n    padding: 2px;\n    border-radius: 5px;\n\n    &:hover {\n        background: ",";\n    }\n"])),(e=>{let{theme:n}=e;return n.primaryHover}));var b=t(579);const x=e=>{let{members:n,onSelect:t}=e;return(0,b.jsx)(d.A,{children:n.map((e=>(0,b.jsx)(v,{onSelect:t,member:e},e.Member_ID)))})},v=e=>{let{member:n,onSelect:t}=e;const l=(0,a.useCallback)((()=>{t(n.Member_ID)}),[t,n.Member_ID]);return(0,b.jsxs)(p,{onClick:l,children:[n.Surname,", ",n.Forename]})},f=e=>{let{member:n,reload:t}=e;const[l,r]=(0,a.useState)({}),[d,m]=(0,a.useState)([]);(0,a.useEffect)((()=>{document.getElementById("memberform_form").reset(),document.getElementById("auth_level").selectedIndex=null===n||void 0===n?void 0:n.Auth_level,r({}),fetch("".concat(c.Hc,"/api/v0/association?api_token=").concat(localStorage.getItem("api_token"))).then((e=>e.json())).then((e=>{m(e)}))}),[n]);return(0,b.jsxs)(o.A,{id:"memberform_form",children:[(0,b.jsxs)(s.A,{children:[(0,b.jsx)("label",{htmlFor:"forename",children:"Vorname:"}),(0,b.jsx)("input",{type:"text",name:"forename",id:"forename",defaultValue:null===n||void 0===n?void 0:n.Forename})]}),(0,b.jsxs)(s.A,{children:[(0,b.jsx)("label",{htmlFor:"surname",children:"Nachname:"}),(0,b.jsx)("input",{type:"text",name:"surname",id:"surname",defaultValue:null===n||void 0===n?void 0:n.Surname})]}),(0,b.jsxs)(s.A,{children:[(0,b.jsx)("label",{htmlFor:"auth_level",children:"Zugriffslevel:"}),(0,b.jsxs)("select",{name:"auth_level",id:"auth_level",children:[(0,b.jsx)("option",{value:"0",children:"ohne"}),(0,b.jsx)("option",{value:"1",children:"Mitglied"}),(0,b.jsx)("option",{value:"2",children:"Vorstand"}),(0,b.jsx)("option",{value:"3",children:"Admin"})]})]}),(0,b.jsxs)(s.A,{children:[(0,b.jsx)("label",{htmlFor:"nicknames",children:"Kurz:"}),(0,b.jsx)("input",{type:"text",name:"nicknames",id:"nicknames",defaultValue:null===n||void 0===n?void 0:n.Nicknames})]}),(0,b.jsxs)(s.A,{children:[(0,b.jsx)("label",{htmlFor:"instrument",children:"Instrument:"}),(0,b.jsx)("input",{type:"text",name:"instrument",id:"instrument",defaultValue:null===n||void 0===n?void 0:n.Instrument})]}),(0,b.jsxs)(s.A,{children:[(0,b.jsx)("label",{htmlFor:"birthdate",children:"Geburtstag:"}),(0,b.jsx)("input",{type:"date",id:"birthdate",defaultValue:null===n||void 0===n?void 0:n.Birthdate})]}),void 0!==n?(0,b.jsx)(b.Fragment,{}):(0,b.jsxs)(s.A,{children:[(0,b.jsx)("label",{htmlFor:"associations",children:"Verein:"}),(0,b.jsx)("select",{name:"associations",id:"associations",children:d.map((e=>(0,b.jsx)("option",{value:e.Association_ID,children:e.Title},e.Association_ID)))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.default,{onClick:async e=>{e.preventDefault(),t()},children:"Abbrechen"}),(0,b.jsx)(i.default,{onClick:async e=>{e.preventDefault();let r=document.getElementById("forename").value,a=document.getElementById("surname").value,i=document.getElementById("auth_level").options[document.getElementById("auth_level").selectedIndex].value,o=document.getElementById("nicknames").value,s=document.getElementById("instrument").value,d=document.getElementById("birthdate").value;void 0!==n?await(0,c.ON)(n.Member_ID,r,a,i,o,s,d,l):fetch("".concat(c.Hc,"/api/v0/member?api_token=").concat(localStorage.getItem("api_token")),{method:"POST",body:JSON.stringify({Forename:r,Surname:a,Auth_level:i,Nicknames:o,Birthdate:d})}).then((e=>e.json())).then((e=>{(async e=>{let n={},t=document.getElementById("associations").options[document.getElementById("associations").selectedIndex].value;n["".concat(e)]={},n["".concat(e)]["".concat(t)]=!0,await(0,c.Ts)(n)})(e.Member_ID).then((()=>t()))}))},children:"Speichern"})]})]})},j=e=>{let{members:n,reload:t}=e;const[l,r]=(0,a.useState)(),i=(0,a.useCallback)((()=>{r(void 0),t()}),[t]),o=(0,a.useCallback)((e=>{fetch("".concat(c.Hc,"/api/v0/member/").concat(e,"?api_token=").concat(localStorage.getItem("api_token"))).then((e=>e.json())).then((e=>{r(e)}))}),[]);return(0,b.jsxs)(h,{children:[(0,b.jsx)(x,{onSelect:o,members:n}),(0,b.jsx)(f,{member:l,reload:i})]})};var g=t(3410),k=t(5467);const y=(0,a.lazy)((()=>t.e(783).then(t.bind(t,1783)))),_=e=>{let{view:n,members:t,reload:l}=e;const r={0:(0,b.jsx)(y,{members:t}),1:(0,b.jsx)(j,{members:t,reload:l})},i={0:(0,b.jsx)("div",{children:"\xdcbersicht l\xe4dt"}),1:(0,b.jsx)("div",{children:"Stammdaten laden"})};return(0,b.jsx)(a.Suspense,{fallback:i[n],children:r[n]})},A=e=>{const[n,t]=(0,a.useState)(0),[l,r]=(0,a.useState)(new Array(0)),o=(0,a.useCallback)((async()=>{fetch("".concat(c.Hc,"/api/v0/member?api_token=").concat(localStorage.getItem("api_token"))).then((e=>e.json())).then((e=>{r(e)}))}),[]);(0,a.useEffect)((()=>{o()}),[o]);const s=(0,a.useCallback)((()=>{o()}),[o]),d=e=>{let n=e.target.id.split("_")[2];t(parseInt(n))},m=[{id:"member_button_0",label:"\xdcbersicht",permitted:(0,k._m)(1),onClick:d},{id:"member_button_1",label:"Stammdaten",permitted:(0,k._m)(2),onClick:d}];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.A,{children:m.map((e=>{let{id:n,label:t,permitted:l,onClick:r}=e;return l&&(0,b.jsx)(i.default,{type:"button",id:n,onClick:r,children:t},n)}))}),(0,b.jsx)(_,{view:n,members:l,reload:s})]})}},2930:(e,n,t)=>{t.d(n,{A:()=>a});var l,r=t(7528);const a=t(403).Ay.form(l||(l=(0,r.A)(["\n    display: block;\n    width: 100%;\n    padding: 5px;\n"])))},7921:(e,n,t)=>{t.d(n,{A:()=>a});var l,r=t(7528);const a=t(403).Ay.div(l||(l=(0,r.A)(["\n    display: block;\n    padding: 2px;\n    label {\n        float: left;\n        width: 25%;\n        min-width: 100px;\n    }\n"])))},5709:(e,n,t)=>{t.d(n,{A:()=>a});var l,r=t(7528);const a=t(403).Ay.nav(l||(l=(0,r.A)(["\n    margin: 2px;\n    padding: 2px;\n    white-space: nowrap;\n    border: 1px solid ",";\n    border-radius: 10px;\n    overflow-y: scroll;\n    max-height: 75vh;\n    min-width: fit-content;\n    width: auto;\n    max-width: fit-content;\n\n\n    @media (max-width: ",") {\n        white-space: normal;\n    }\n\n    ::-webkit-scrollbar {\n        width: 5px;\n    }\n\n    ::-webkit-scrollbar-track {\n        background: none;\n    }\n\n    ::-webkit-scrollbar-thumb {\n        background: ",";\n        border-radius: 5px;\n    }\n\n    ::-webkit-scrollbar-thumb:hover {\n        background: ",";\n    }\n"])),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.mobile}),(e=>{let{theme:n}=e;return n.primaryLight}),(e=>{let{theme:n}=e;return n.primaryHover}))},3410:(e,n,t)=>{t.d(n,{A:()=>a});var l,r=t(7528);const a=t(403).Ay.nav(l||(l=(0,r.A)(["\n    display: flex;\n    background-color: ",";\n    position: relative;\n    padding: 5px;\n    margin: 5px;\n    border-radius: 20px;\n\n    flex-wrap: wrap;\n    justify-content: center;\n"])),(e=>{let{theme:n}=e;return n.primaryHover}))},5467:(e,n,t)=>{t.d(n,{_m:()=>l,sx:()=>r});const l=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const t=JSON.parse(localStorage.getItem("permissions")||"{}");var l;if(null===n){for(let r in t)if(t[r].includes(e))return!0}else if(null!==(l=t[n])&&void 0!==l&&l.includes(e))return!0;return!1},r=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(let t of e)if(l(t,n))return!0;return!1}}}]);
//# sourceMappingURL=775.5a194fd1.chunk.js.map